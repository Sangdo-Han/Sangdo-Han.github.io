<!DOCTYPE html> <html lang="en-US"> <head> <meta charset="UTF-8"> <meta http-equiv="X-UA-Compatible" content="IE=Edge"> <link rel="stylesheet" href="/assets/css/just-the-docs-default.css"> <link rel="stylesheet" href="/assets/css/just-the-docs-head-nav.css" id="jtd-head-nav-stylesheet"> <style id="jtd-nav-activation"> .site-nav > ul.nav-list:first-child > li > a, .site-nav > ul.nav-list:first-child > li > ul > li > a, .site-nav > ul.nav-list:first-child > li > ul > li > ul > li:not(:nth-child(2)) > a, .site-nav > ul.nav-list:first-child > li > ul > li > ul > li > ul > li a { background-image: none; } .site-nav > ul.nav-list:not(:first-child) a, .site-nav li.external a { background-image: none; } .site-nav > ul.nav-list:first-child > li:nth-child(2) > ul > li:nth-child(3) > ul > li:nth-child(2) > a { font-weight: 600; text-decoration: none; }.site-nav > ul.nav-list:first-child > li:nth-child(2) > button svg, .site-nav > ul.nav-list:first-child > li:nth-child(2) > ul > li:nth-child(3) > button svg, .site-nav > ul.nav-list:first-child > li:nth-child(2) > ul > li:nth-child(3) > ul > li:nth-child(2) > button svg { transform: rotate(-90deg); }.site-nav > ul.nav-list:first-child > li.nav-list-item:nth-child(2) > ul.nav-list, .site-nav > ul.nav-list:first-child > li.nav-list-item:nth-child(2) > ul.nav-list > li.nav-list-item:nth-child(3) > ul.nav-list, .site-nav > ul.nav-list:first-child > li.nav-list-item:nth-child(2) > ul.nav-list > li.nav-list-item:nth-child(3) > ul.nav-list > li.nav-list-item:nth-child(2) > ul.nav-list { display: block; } </style> <script src="/assets/js/vendor/lunr.min.js"></script> <script src="/assets/js/just-the-docs.js"></script> <meta name="viewport" content="width=device-width, initial-scale=1"> <link rel="icon" href="/assets/images/favicon.ico" type="image/x-icon"> <!-- Begin Jekyll SEO tag v2.8.0 --> <title>Pointers - In progress | sanhan research</title> <meta name="generator" content="Jekyll v3.10.0" /> <meta property="og:title" content="Pointers - In progress" /> <meta property="og:locale" content="en_US" /> <meta name="description" content="Lesson 5" /> <meta property="og:description" content="Lesson 5" /> <link rel="canonical" href="http://localhost:4000/docs/programming/cpp/02.%20Pointers.html" /> <meta property="og:url" content="http://localhost:4000/docs/programming/cpp/02.%20Pointers.html" /> <meta property="og:site_name" content="sanhan research" /> <meta property="og:type" content="website" /> <meta name="twitter:card" content="summary" /> <meta property="twitter:title" content="Pointers - In progress" /> <meta name="google-site-verification" content="TumEYHq6xpSNuebLNUkEWUMOUm3w7a6mdrQ33DQPEwA" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"WebPage","description":"Lesson 5","headline":"Pointers - In progress","url":"http://localhost:4000/docs/programming/cpp/02.%20Pointers.html"}</script> <!-- End Jekyll SEO tag --> <!-- Automatically display code inside script tags with type=math/tex using MathJax --> <script type="text/javascript" defer src="/assets/js/mathjax-script-type.js"> </script> <!-- Copied from https://docs.mathjax.org/en/latest/web/components/combined.html --> <script type="text/javascript" id="MathJax-script" defer src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-svg.js"> </script> </head> <body> <a class="skip-to-main" href="#main-content">Skip to main content</a> <svg xmlns="http://www.w3.org/2000/svg" class="d-none"> <symbol id="svg-link" viewBox="0 0 24 24"> <title>Link</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-link"> <path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path> </svg> </symbol> <symbol id="svg-menu" viewBox="0 0 24 24"> <title>Menu</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-menu"> <line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line> </svg> </symbol> <symbol id="svg-arrow-right" viewBox="0 0 24 24"> <title>Expand</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevron-right"> <polyline points="9 18 15 12 9 6"></polyline> </svg> </symbol> <!-- Feather. MIT License: https://github.com/feathericons/feather/blob/master/LICENSE --> <symbol id="svg-external-link" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-external-link"> <title id="svg-external-link-title">(external link)</title> <path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"></path><polyline points="15 3 21 3 21 9"></polyline><line x1="10" y1="14" x2="21" y2="3"></line> </symbol> <symbol id="svg-doc" viewBox="0 0 24 24"> <title>Document</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-file"> <path d="M13 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V9z"></path><polyline points="13 2 13 9 20 9"></polyline> </svg> </symbol> <symbol id="svg-search" viewBox="0 0 24 24"> <title>Search</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-search"> <circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line> </svg> </symbol> <!-- Bootstrap Icons. MIT License: https://github.com/twbs/icons/blob/main/LICENSE.md --> <symbol id="svg-copy" viewBox="0 0 16 16"> <title>Copy</title> <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-clipboard" viewBox="0 0 16 16"> <path d="M4 1.5H3a2 2 0 0 0-2 2V14a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V3.5a2 2 0 0 0-2-2h-1v1h1a1 1 0 0 1 1 1V14a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1V3.5a1 1 0 0 1 1-1h1v-1z"/> <path d="M9.5 1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-1a.5.5 0 0 1 .5-.5h3zm-3-1A1.5 1.5 0 0 0 5 1.5v1A1.5 1.5 0 0 0 6.5 4h3A1.5 1.5 0 0 0 11 2.5v-1A1.5 1.5 0 0 0 9.5 0h-3z"/> </svg> </symbol> <symbol id="svg-copied" viewBox="0 0 16 16"> <title>Copied</title> <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-clipboard-check-fill" viewBox="0 0 16 16"> <path d="M6.5 0A1.5 1.5 0 0 0 5 1.5v1A1.5 1.5 0 0 0 6.5 4h3A1.5 1.5 0 0 0 11 2.5v-1A1.5 1.5 0 0 0 9.5 0h-3Zm3 1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-1a.5.5 0 0 1 .5-.5h3Z"/> <path d="M4 1.5H3a2 2 0 0 0-2 2V14a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V3.5a2 2 0 0 0-2-2h-1v1A2.5 2.5 0 0 1 9.5 5h-3A2.5 2.5 0 0 1 4 2.5v-1Zm6.854 7.354-3 3a.5.5 0 0 1-.708 0l-1.5-1.5a.5.5 0 0 1 .708-.708L7.5 10.793l2.646-2.647a.5.5 0 0 1 .708.708Z"/> </svg> </symbol> </svg> <div class="side-bar"> <div class="site-header" role="banner"> <a href="/" class="site-title lh-tight"> sanhan research </a> <button id="menu-button" class="site-button btn-reset" aria-label="Toggle menu" aria-pressed="false"> <svg viewBox="0 0 24 24" class="icon" aria-hidden="true"><use xlink:href="#svg-menu"></use></svg> </button> </div> <nav aria-label="Main" id="site-nav" class="site-nav"> <ul class="nav-list"><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in AI Research category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/docs/ai-research" class="nav-list-link">AI Research</a><ul class="nav-list"><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in ARC-AGI category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/docs/ai-research/arc-agi" class="nav-list-link">ARC-AGI</a><ul class="nav-list"><li class="nav-list-item"><a href="/docs/ai-research/arc-agi/dataset" class="nav-list-link">ARC-AGI dataset</a></li><li class="nav-list-item"><a href="/docs/ai-research/arc-agi/resarch-note" class="nav-list-link">Research on ARC-AGI</a></li></ul></li><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in LLM category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/docs/ai-research/llm" class="nav-list-link">LLM</a><ul class="nav-list"><li class="nav-list-item"><a href="/docs/ai-research/llm/utilizations" class="nav-list-link">LLM Utilizations</a></li><li class="nav-list-item"><a href="/docs/ai-research/llm/control-theory" class="nav-list-link">Control theory of LLM</a></li></ul></li><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in Computer Vision category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/docs/ai-research/computer-vision" class="nav-list-link">Computer Vision</a><ul class="nav-list"><li class="nav-list-item"><a href="/docs/ai-research/computer-vision/3d-reconstruction" class="nav-list-link">3D Image Reconstruction</a></li></ul></li><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in Machine Unlearning category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/docs/ai-research/unlearning" class="nav-list-link">Machine Unlearning</a><ul class="nav-list"><li class="nav-list-item"><a href="/docs/ai-research/unlearning/resarch-note" class="nav-list-link">Research on Machine Unlearning</a></li></ul></li></ul></li><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in Programming category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/docs/programming" class="nav-list-link">Programming</a><ul class="nav-list"><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in Algorithms and Data structures category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/docs/programming/algorithms" class="nav-list-link">Algorithms and Data structures</a><ul class="nav-list"><li class="nav-list-item"><a href="/docs/programming/algorithms/Useful%20Timer%20Class.html" class="nav-list-link">Useful Timer Class</a></li></ul></li><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in Concurrent Programming category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/docs/programming/concurrent-programming" class="nav-list-link">Concurrent Programming</a><ul class="nav-list"><li class="nav-list-item"><a href="/docs/programming/concurrent-programming/01.%20Introduction.html" class="nav-list-link">01. Introduction</a></li><li class="nav-list-item"><a href="/docs/programming/concurrent-programming/02.%20Multitasking.html" class="nav-list-link">02. Multitasking</a></li><li class="nav-list-item"><a href="/docs/programming/concurrent-programming/03.%20Multiprocessing.html" class="nav-list-link">03. Multiprocessing</a></li><li class="nav-list-item"><a href="/docs/programming/concurrent-programming/04.%20Multithreading.html" class="nav-list-link">04. Multithreading</a></li><li class="nav-list-item"><a href="/docs/programming/concurrent-programming/05.%20IPC.html" class="nav-list-link">05. Inter-Process Communication (IPC)</a></li><li class="nav-list-item"><a href="/docs/programming/concurrent-programming/06.%20IPC-Message-Passing.html" class="nav-list-link">06. IPC - Message Passing</a></li><li class="nav-list-item"><a href="/docs/programming/concurrent-programming/07.%20IPC-Shared-Memory.html" class="nav-list-link">07. IPC - Shared Memory</a></li><li class="nav-list-item"><a href="/docs/programming/concurrent-programming/08.%20Decomposition.html" class="nav-list-link">08. Decomposition</a></li><li class="nav-list-item"><a href="/docs/programming/concurrent-programming/09.%20Decomposition%20-%20Task.html" class="nav-list-link">09. Decomposition - Task Parallelism</a></li><li class="nav-list-item"><a href="/docs/programming/concurrent-programming/10.%20Decomposition%20-%20Data.html" class="nav-list-link">10. Decomposition - Data Parallelism</a></li><li class="nav-list-item"><a href="/docs/programming/concurrent-programming/11.%20Synchronization.html" class="nav-list-link">11. Synchronization</a></li><li class="nav-list-item"><a href="/docs/programming/concurrent-programming/12.%20Synchronization%20-%20Mutexes%20and%20Semaphores.html" class="nav-list-link">12. Synchronization - Mutexes and Semaphores</a></li><li class="nav-list-item"><a href="/docs/programming/concurrent-programming/13.%20Synchronization%20-%20Deadlocks.html" class="nav-list-link">13. Synchronization - Deadlock</a></li><li class="nav-list-item"><a href="/docs/programming/concurrent-programming/14.%20Synchronization%20-%20Starvation.html" class="nav-list-link">14. Synchronization - Starvation</a></li><li class="nav-list-item"><a href="/docs/programming/concurrent-programming/15.%20Synchronization%20-%20RWLocks%20and%20Spin%20Locks.html" class="nav-list-link">15. Synchronization - RWLock, Spin Lock</a></li></ul></li><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in C / C++ category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/docs/programming/c-cpp" class="nav-list-link">C / C++</a><ul class="nav-list"><li class="nav-list-item"><a href="/docs/programming/cpp/01.%20Coding%20Conventions.html" class="nav-list-link">01. Coding Conventions - In Progress</a></li><li class="nav-list-item"><a href="/docs/programming/cpp/02.%20Pointers.html" class="nav-list-link">02. Pointers - In progress</a></li></ul></li><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in Python category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/docs/programming/python" class="nav-list-link">Python</a><ul class="nav-list"><li class="nav-list-item"><a href="/docs/programming/python/01.%20Typing.html" class="nav-list-link">01. Typing</a></li><li class="nav-list-item"><a href="/docs/programming/python/02.%20Decorator.html" class="nav-list-link">02. Decorators</a></li></ul></li><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in Rust category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/docs/programming/rust" class="nav-list-link">Rust</a><ul class="nav-list"><li class="nav-list-item"><a href="/docs/programming/rust/introduction" class="nav-list-link">01. Hello, World!</a></li><li class="nav-list-item"><a href="/docs/programming/rust/basic-syntax" class="nav-list-link">02. Basic Syntax in Rust</a></li><li class="nav-list-item"><a href="/docs/programming/rust/memory-related" class="nav-list-link">03. Pointers in Rust</a></li></ul></li></ul></li><li class="nav-list-item"><a href="/docs/mathematics" class="nav-list-link">Mathematics</a></li><li class="nav-list-item"><a href="/docs/devlog" class="nav-list-link">Devlog</a></li><li class="nav-list-item"><a href="/docs/about.html" class="nav-list-link">About</a></li></ul> <ul class="nav-list"><li class="nav-list-item external"> <a href="https://github.com/Sangdo-Han" class="nav-list-link external" > GitHub <svg viewBox="0 0 24 24" aria-labelledby="svg-external-link-title"><use xlink:href="#svg-external-link"></use></svg> </a> </li></ul> </nav> <footer class="site-footer"> This site uses <a href="https://github.com/just-the-docs/just-the-docs">Just the Docs</a>, a documentation theme for Jekyll. </footer> </div> <div class="main" id="top"> <div id="main-header" class="main-header"> <div class="search" role="search"> <div class="search-input-wrap"> <input type="text" id="search-input" class="search-input" tabindex="0" placeholder="Search sanhan research" aria-label="Search sanhan research" autocomplete="off"> <label for="search-input" class="search-label"><svg viewBox="0 0 24 24" class="search-icon"><use xlink:href="#svg-search"></use></svg></label> </div> <div id="search-results" class="search-results"></div> </div> </div> <div class="main-content-wrap"> <nav aria-label="Breadcrumb" class="breadcrumb-nav"> <ol class="breadcrumb-nav-list"> <li class="breadcrumb-nav-list-item"><a href="/docs/programming">Programming</a></li> <li class="breadcrumb-nav-list-item"><a href="/docs/programming/c-cpp">C / C++</a></li> <li class="breadcrumb-nav-list-item"><span>02. Pointers - In progress</span></li> </ol> </nav> <div id="main-content" class="main-content"> <main> <h1 id="pointers-in-c--c"> <a href="#pointers-in-c--c" class="anchor-heading" aria-labelledby="pointers-in-c--c"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Pointers in C / C++ </h1> <p>Pointer is the most notorious but most powerful syntax/keyword in C/C++. Although the concept of pointer is simple that pointer simply points to something. As pointer can points actually everything and it could work outside of code scopes, it causes complexities. In addition to this, with combining dynamic memory allocation (heap allocation), it often causes serious problem in memory leakages, dangling pointer, buffer overflow and securities (e.g. stack smashing).</p> <details open=""> <summary class="text-delta"> Table of contents </summary> <ul id="markdown-toc"> <li><a href="#pointers-in-c--c" id="markdown-toc-pointers-in-c--c">Pointers in C / C++</a> <ul> <li><a href="#basic-pointer" id="markdown-toc-basic-pointer">Basic Pointer</a></li> <li><a href="#dynamic-allocation-with-pointers" id="markdown-toc-dynamic-allocation-with-pointers">Dynamic Allocation with Pointers</a></li> <li><a href="#c-style-dynamic-allocation" id="markdown-toc-c-style-dynamic-allocation">C-style Dynamic Allocation</a></li> <li><a href="#c---raii-dynamic-allocation" id="markdown-toc-c---raii-dynamic-allocation">C++ - RAII Dynamic Allocation</a></li> </ul> </li> </ul> </details> <h2 id="basic-pointer"> <a href="#basic-pointer" class="anchor-heading" aria-labelledby="basic-pointer"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Basic Pointer </h2> <p>Here’s C / C++ basic raw-pointer. In this example, we simply points the stack memories. If you follow comments and compare them to the outputs, you can easily follow how the pointer can be used in stack memory.</p> <div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">#include</span> <span class="cpf">&lt;iostream&gt;</span><span class="cp">
</span>
<span class="kt">void</span> <span class="nf">CStylePointer</span><span class="p">()</span> <span class="p">{</span>
    <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"</span><span class="se">\n\n</span><span class="s">==== BASIC C-style RAW POINTER - Declaration ====</span><span class="se">\n</span><span class="s">"</span><span class="p">;</span>
    
    <span class="kt">int</span> <span class="n">int1</span> <span class="o">=</span> <span class="mi">13</span><span class="p">;</span>
    <span class="kt">int</span> <span class="n">int2</span> <span class="o">=</span> <span class="mi">5</span><span class="p">;</span>

    <span class="kt">int</span><span class="o">*</span> <span class="n">int1Ptr</span> <span class="o">=</span> <span class="o">&amp;</span><span class="n">int1</span><span class="p">;</span>
    <span class="kt">int</span><span class="o">*</span> <span class="n">int2Ptr</span> <span class="o">=</span> <span class="o">&amp;</span><span class="n">int2</span><span class="p">;</span>

    <span class="c1">// Even if another pointer points to the same value, it points to the same address of int1,</span>
    <span class="c1">// but the pointer location itself is different.</span>
    <span class="kt">int</span><span class="o">*</span> <span class="n">int3Ptr</span> <span class="o">=</span> <span class="o">&amp;</span><span class="n">int1</span><span class="p">;</span> 

    <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"int1Ptr address: "</span> <span class="o">&lt;&lt;</span> <span class="o">&amp;</span><span class="n">int1Ptr</span> <span class="o">&lt;&lt;</span> <span class="s">"</span><span class="se">\n</span><span class="s">"</span><span class="p">;</span>
    <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"int2Ptr address: "</span> <span class="o">&lt;&lt;</span> <span class="o">&amp;</span><span class="n">int2Ptr</span> <span class="o">&lt;&lt;</span> <span class="s">"</span><span class="se">\n</span><span class="s">"</span><span class="p">;</span>
    <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"int3Ptr address: "</span> <span class="o">&lt;&lt;</span> <span class="o">&amp;</span><span class="n">int3Ptr</span> <span class="o">&lt;&lt;</span> <span class="s">"</span><span class="se">\n</span><span class="s">"</span><span class="p">;</span>

    <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"</span><span class="se">\n\n</span><span class="s">==== BASIC C-style RAW POINTER - Swap Values ====</span><span class="se">\n</span><span class="s">"</span><span class="p">;</span>
    
    <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"Before swap:</span><span class="se">\n</span><span class="s">"</span><span class="p">;</span>
    <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"int1Ptr points to "</span> <span class="o">&lt;&lt;</span> <span class="n">int1Ptr</span> <span class="o">&lt;&lt;</span> <span class="s">" with value: "</span> <span class="o">&lt;&lt;</span> <span class="o">*</span><span class="n">int1Ptr</span> <span class="o">&lt;&lt;</span> <span class="s">"</span><span class="se">\n</span><span class="s">"</span><span class="p">;</span>
    <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"int2Ptr points to "</span> <span class="o">&lt;&lt;</span> <span class="n">int2Ptr</span> <span class="o">&lt;&lt;</span> <span class="s">" with value: "</span> <span class="o">&lt;&lt;</span> <span class="o">*</span><span class="n">int2Ptr</span> <span class="o">&lt;&lt;</span> <span class="s">"</span><span class="se">\n</span><span class="s">"</span><span class="p">;</span>

    <span class="c1">// Swapping values</span>
    <span class="kt">int</span> <span class="n">tempInt</span> <span class="o">=</span> <span class="o">*</span><span class="n">int1Ptr</span><span class="p">;</span>  
    <span class="o">*</span><span class="n">int1Ptr</span> <span class="o">=</span> <span class="o">*</span><span class="n">int2Ptr</span><span class="p">;</span>  
    <span class="o">*</span><span class="n">int2Ptr</span> <span class="o">=</span> <span class="n">tempInt</span><span class="p">;</span>  

    <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"After swap:</span><span class="se">\n</span><span class="s">"</span><span class="p">;</span>
    <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"int1Ptr points to "</span> <span class="o">&lt;&lt;</span> <span class="n">int1Ptr</span> <span class="o">&lt;&lt;</span> <span class="s">" with value: "</span> <span class="o">&lt;&lt;</span> <span class="o">*</span><span class="n">int1Ptr</span> <span class="o">&lt;&lt;</span> <span class="s">"</span><span class="se">\n</span><span class="s">"</span><span class="p">;</span>
    <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"int2Ptr points to "</span> <span class="o">&lt;&lt;</span> <span class="n">int2Ptr</span> <span class="o">&lt;&lt;</span> <span class="s">" with value: "</span> <span class="o">&lt;&lt;</span> <span class="o">*</span><span class="n">int2Ptr</span> <span class="o">&lt;&lt;</span> <span class="s">"</span><span class="se">\n</span><span class="s">"</span><span class="p">;</span>

    <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"int3Ptr still points to int1, so its value also changed: "</span> <span class="o">&lt;&lt;</span> <span class="o">*</span><span class="n">int3Ptr</span> <span class="o">&lt;&lt;</span> <span class="s">"</span><span class="se">\n</span><span class="s">"</span><span class="p">;</span>


    <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"</span><span class="se">\n\n</span><span class="s">==== BASIC C-style RAW POINTER - 1D Array and Pointer Arithmetic ====</span><span class="se">\n</span><span class="s">"</span><span class="p">;</span>

    <span class="kt">int</span> <span class="n">array1D</span><span class="p">[</span><span class="mi">5</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">};</span>
    <span class="kt">int</span><span class="o">*</span> <span class="n">arr1DPtr</span> <span class="o">=</span> <span class="n">array1D</span><span class="p">;</span>
    <span class="kt">int</span><span class="o">*</span> <span class="n">arr1DPtrAlias</span> <span class="o">=</span> <span class="o">&amp;</span><span class="n">array1D</span><span class="p">[</span><span class="mi">0</span><span class="p">];</span>

    <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"arr1DPtr : "</span> <span class="o">&lt;&lt;</span> <span class="n">arr1DPtr</span> <span class="o">&lt;&lt;</span> <span class="sc">'\n'</span><span class="p">;</span>
    <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"arr1DPtrAlias : "</span> <span class="o">&lt;&lt;</span> <span class="n">arr1DPtrAlias</span> <span class="o">&lt;&lt;</span> <span class="sc">'\n'</span><span class="p">;</span>

    <span class="c1">// Pointer Arithmetic</span>
    <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"Pointer arithmetic:</span><span class="se">\n</span><span class="s">"</span><span class="p">;</span>
    <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"arr1DPtr is at address: "</span> <span class="o">&lt;&lt;</span> <span class="n">arr1DPtr</span> <span class="o">&lt;&lt;</span> <span class="s">" with value: "</span> <span class="o">&lt;&lt;</span> <span class="o">*</span><span class="n">arr1DPtr</span> <span class="o">&lt;&lt;</span> <span class="sc">'\n'</span><span class="p">;</span>
    <span class="n">arr1DPtr</span><span class="o">++</span><span class="p">;</span>  
    <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"After ++arr1DPtr, new address: "</span> <span class="o">&lt;&lt;</span> <span class="n">arr1DPtr</span> <span class="o">&lt;&lt;</span> <span class="s">" with value: "</span> <span class="o">&lt;&lt;</span> <span class="o">*</span><span class="n">arr1DPtr</span> <span class="o">&lt;&lt;</span> <span class="sc">'\n'</span><span class="p">;</span>

    <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"Value at arr1DPtr + 2: "</span> <span class="o">&lt;&lt;</span> <span class="o">*</span><span class="p">(</span><span class="n">arr1DPtr</span> <span class="o">+</span> <span class="mi">2</span><span class="p">)</span> <span class="o">&lt;&lt;</span> <span class="s">" (moves forward by 2 integers)</span><span class="se">\n</span><span class="s">"</span><span class="p">;</span>

    <span class="c1">// Iterate through array using pointer arithmetic</span>
    <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"Iterating array using pointer arithmetic: "</span><span class="p">;</span>
    <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">offset</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">offset</span> <span class="o">&lt;</span> <span class="mi">5</span><span class="p">;</span> <span class="o">++</span><span class="n">offset</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="o">*</span><span class="p">(</span><span class="n">array1D</span> <span class="o">+</span> <span class="n">offset</span><span class="p">)</span> <span class="o">&lt;&lt;</span> <span class="s">" "</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"</span><span class="se">\n</span><span class="s">"</span><span class="p">;</span>


    <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"</span><span class="se">\n\n</span><span class="s">==== BASIC C-style RAW POINTER - 2D Array ====</span><span class="se">\n</span><span class="s">"</span><span class="p">;</span>

    <span class="kt">int</span> <span class="n">array2D</span><span class="p">[</span><span class="mi">2</span><span class="p">][</span><span class="mi">5</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
      <span class="p">{</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">},</span> <span class="p">{</span><span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">9</span><span class="p">}</span>
    <span class="p">};</span>

    <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"**array2D points to: "</span> <span class="o">&lt;&lt;</span> <span class="o">**</span><span class="n">array2D</span> <span class="o">&lt;&lt;</span> <span class="s">" (first element: 0)</span><span class="se">\n</span><span class="s">"</span><span class="p">;</span>
    <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"**(array2D + 1) points to: "</span> <span class="o">&lt;&lt;</span> <span class="o">**</span><span class="p">(</span><span class="n">array2D</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span> <span class="o">&lt;&lt;</span> <span class="s">" (first element of second row: 5)</span><span class="se">\n</span><span class="s">"</span><span class="p">;</span>
    <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"*((*array2D) + 5) points to: "</span> <span class="o">&lt;&lt;</span> <span class="o">*</span><span class="p">((</span><span class="o">*</span><span class="n">array2D</span><span class="p">)</span> <span class="o">+</span> <span class="mi">5</span><span class="p">)</span> <span class="o">&lt;&lt;</span> <span class="s">" (linear memory access to second row first element: 5)</span><span class="se">\n</span><span class="s">"</span><span class="p">;</span>
    <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"*(*(array2D + 1) + 2) points to: "</span> <span class="o">&lt;&lt;</span> <span class="o">*</span><span class="p">(</span><span class="o">*</span><span class="p">(</span><span class="n">array2D</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span> <span class="o">+</span> <span class="mi">2</span><span class="p">)</span> <span class="o">&lt;&lt;</span> <span class="s">" (element at row 1, col 2: 7)</span><span class="se">\n</span><span class="s">"</span><span class="p">;</span>

    <span class="c1">// Pointer Aliases for Rows</span>
    <span class="kt">int</span><span class="o">*</span> <span class="n">arr2DPtr0</span> <span class="o">=</span> <span class="n">array2D</span><span class="p">[</span><span class="mi">0</span><span class="p">];</span>
    <span class="kt">int</span><span class="o">*</span> <span class="n">arr2DPtr0Alias</span> <span class="o">=</span> <span class="o">*</span><span class="n">array2D</span><span class="p">;</span>
    <span class="kt">int</span><span class="o">*</span> <span class="n">arr2DPtr1</span> <span class="o">=</span> <span class="n">array2D</span><span class="p">[</span><span class="mi">1</span><span class="p">];</span>

    <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"array2D base address: "</span> <span class="o">&lt;&lt;</span> <span class="n">array2D</span> <span class="o">&lt;&lt;</span> <span class="s">"</span><span class="se">\n</span><span class="s">"</span><span class="p">;</span>
    <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"arr2DPtr0 (first row): "</span> <span class="o">&lt;&lt;</span> <span class="n">arr2DPtr0</span> <span class="o">&lt;&lt;</span> <span class="s">"</span><span class="se">\n</span><span class="s">"</span><span class="p">;</span>
    <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"arr2DPtr0Alias (alias for first row): "</span> <span class="o">&lt;&lt;</span> <span class="n">arr2DPtr0Alias</span> <span class="o">&lt;&lt;</span> <span class="s">"</span><span class="se">\n</span><span class="s">"</span><span class="p">;</span>
    <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"arr2DPtr1 (second row): "</span> <span class="o">&lt;&lt;</span> <span class="n">arr2DPtr1</span> <span class="o">&lt;&lt;</span> <span class="s">"</span><span class="se">\n</span><span class="s">"</span><span class="p">;</span>

    <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"array2D[1] (second row): "</span> <span class="o">&lt;&lt;</span> <span class="n">array2D</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">&lt;&lt;</span> <span class="s">"</span><span class="se">\n</span><span class="s">"</span><span class="p">;</span>
    <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"(array2D[0] + 5) (next row start): "</span> <span class="o">&lt;&lt;</span> <span class="p">(</span><span class="n">array2D</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">+</span> <span class="mi">5</span><span class="p">)</span> <span class="o">&lt;&lt;</span> <span class="s">"</span><span class="se">\n</span><span class="s">"</span><span class="p">;</span>
    <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"(array2D + 1) (pointer to second row): "</span> <span class="o">&lt;&lt;</span> <span class="p">(</span><span class="n">array2D</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span> <span class="o">&lt;&lt;</span> <span class="s">"</span><span class="se">\n</span><span class="s">"</span><span class="p">;</span>
<span class="p">}</span>

<span class="kt">int</span> <span class="n">main</span><span class="p">()</span>
<span class="p">{</span>
    <span class="n">CStylePointer</span><span class="p">();</span>
    <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div></div> <h2 id="dynamic-allocation-with-pointers"> <a href="#dynamic-allocation-with-pointers" class="anchor-heading" aria-labelledby="dynamic-allocation-with-pointers"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Dynamic Allocation with Pointers </h2> <p>When it comes to the dynamic allocation (or heap allocation), the pointer needs developer’s management. Unlike modern managed languages using garbage collections such as Python, JAVA and so on, developers needs to indicate when the memory is deleted explicitly.</p> <p>In C-style, we use <code class="language-plaintext highlighter-rouge">malloc</code> (which refers to “memory allocate”) for allocating heap memory, and use <code class="language-plaintext highlighter-rouge">free</code> (which refers to “free memory”) for deallocating the existing memory. Those functions are in <code class="language-plaintext highlighter-rouge">stdlib.h</code>.</p> <blockquote> <p>Note - <code class="language-plaintext highlighter-rouge">malloc</code>, <code class="language-plaintext highlighter-rouge">calloc</code>, <code class="language-plaintext highlighter-rouge">realloc</code> and <code class="language-plaintext highlighter-rouge">alloca</code><br /> <code class="language-plaintext highlighter-rouge">malloc</code> is generally used for memory allocation, while <code class="language-plaintext highlighter-rouge">calloc</code> clear the memory first then allocate. <code class="language-plaintext highlighter-rouge">realloc</code> often uses for resize allocation memory. and finally <code class="language-plaintext highlighter-rouge">alloca</code> is stack-heap memory allocation depends on the platforms (OS (that supports which compilers) / architecture).</p> </blockquote> <p>In C++ style, we can use C-style allocation, however, we generally use built-in memory allocation keywords: <code class="language-plaintext highlighter-rouge">new</code> and <code class="language-plaintext highlighter-rouge">delete</code>.</p> <p>In either style, C or C++, A developer must use pointer to access memory and manage the memory with pointer.</p> <p>Of course the best option is writing code only using stack memory (which is controlled by the code block), however, unfortunately, we generally needs large memory space in most programming.</p> <p>RAII (Resource Acquisition Is Initialization) pattern might be the best pattern that using heap memory effectively by mimicing the stack behavior (automatic deallocation of memory when the code block is ended and even unexpectedly ended).</p> <p>In C++, <code class="language-plaintext highlighter-rouge">std::memory</code> like libraries supports RAII pattern such as <code class="language-plaintext highlighter-rouge">std::unique_ptr</code>, <code class="language-plaintext highlighter-rouge">std::shared_ptr</code> and <code class="language-plaintext highlighter-rouge">std::weak_ptr</code>. In most case, using <code class="language-plaintext highlighter-rouge">std::unique_ptr</code> is effectively used for without concerns, however, there is no free lunch, most big tech companies using C++ have their own <code class="language-plaintext highlighter-rouge">std::memory</code>-like library for their own purposes: some of them are more debuggable or much more safer or much more powerful.</p> <h2 id="c-style-dynamic-allocation"> <a href="#c-style-dynamic-allocation" class="anchor-heading" aria-labelledby="c-style-dynamic-allocation"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> C-style Dynamic Allocation </h2> <p>{please provide C-style dynamic allocation that matches up under C+ RAII Dynamic Allocation}</p> <div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">#include</span> <span class="cpf">&lt;iostream&gt;</span><span class="cp">
#include</span> <span class="cpf">&lt;cstdlib&gt;</span><span class="c1"> // &lt;stdlib.h&gt;</span><span class="cp">
</span>
<span class="kt">void</span> <span class="nf">CStyleDynamicAllocation</span><span class="p">()</span> <span class="p">{</span>
    <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"</span><span class="se">\n\n</span><span class="s">==== C-style Dynamic Allocation ====</span><span class="se">\n</span><span class="s">"</span><span class="p">;</span>

    <span class="c1">// Allocate memory for an integer</span>
    <span class="kt">int</span><span class="o">*</span> <span class="n">intPtr</span> <span class="o">=</span> <span class="p">(</span><span class="kt">int</span><span class="o">*</span><span class="p">)</span><span class="n">malloc</span><span class="p">(</span><span class="k">sizeof</span><span class="p">(</span><span class="kt">int</span><span class="p">));</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">intPtr</span> <span class="o">==</span> <span class="nb">nullptr</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">std</span><span class="o">::</span><span class="n">cerr</span> <span class="o">&lt;&lt;</span> <span class="s">"Memory allocation failed!</span><span class="se">\n</span><span class="s">"</span><span class="p">;</span>
        <span class="k">return</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="o">*</span><span class="n">intPtr</span> <span class="o">=</span> <span class="mi">123</span><span class="p">;</span>
    <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"Allocated integer value: "</span> <span class="o">&lt;&lt;</span> <span class="o">*</span><span class="n">intPtr</span> <span class="o">&lt;&lt;</span> <span class="s">"</span><span class="se">\n</span><span class="s">"</span><span class="p">;</span>

    <span class="c1">// Free the allocated memory</span>
    <span class="n">free</span><span class="p">(</span><span class="n">intPtr</span><span class="p">);</span>
    <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"Freed integer memory.</span><span class="se">\n</span><span class="s">"</span><span class="p">;</span>

    <span class="c1">// Allocate memory for an array of integers</span>
    <span class="kt">int</span><span class="o">*</span> <span class="n">arrayPtr</span> <span class="o">=</span> <span class="p">(</span><span class="kt">int</span><span class="o">*</span><span class="p">)</span><span class="n">malloc</span><span class="p">(</span><span class="mi">5</span> <span class="o">*</span> <span class="k">sizeof</span><span class="p">(</span><span class="kt">int</span><span class="p">));</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">arrayPtr</span> <span class="o">==</span> <span class="nb">nullptr</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">std</span><span class="o">::</span><span class="n">cerr</span> <span class="o">&lt;&lt;</span> <span class="s">"Memory allocation failed for array!</span><span class="se">\n</span><span class="s">"</span><span class="p">;</span>
        <span class="k">return</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="mi">5</span><span class="p">;</span> <span class="o">++</span><span class="n">i</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">arrayPtr</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">i</span> <span class="o">*</span> <span class="mi">10</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"Allocated array values: "</span><span class="p">;</span>
    <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="mi">5</span><span class="p">;</span> <span class="o">++</span><span class="n">i</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="n">arrayPtr</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">&lt;&lt;</span> <span class="s">" "</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"</span><span class="se">\n</span><span class="s">"</span><span class="p">;</span>

    <span class="c1">// Free the allocated array memory</span>
    <span class="n">free</span><span class="p">(</span><span class="n">arrayPtr</span><span class="p">);</span>
    <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"Freed array memory.</span><span class="se">\n</span><span class="s">"</span><span class="p">;</span>
<span class="p">}</span>

<span class="kt">int</span> <span class="n">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="n">CStyleDynamicAllocation</span><span class="p">();</span>
    <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div></div> <h2 id="c---raii-dynamic-allocation"> <a href="#c---raii-dynamic-allocation" class="anchor-heading" aria-labelledby="c---raii-dynamic-allocation"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> C++ - RAII Dynamic Allocation </h2> <p>The following <code class="language-plaintext highlighter-rouge">UniquePtr</code> is mocking of <code class="language-plaintext highlighter-rouge">std::unique_ptr</code> in standard library, that make a pointer delete its occupation of memory automatically when the code block ends.</p> <div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">#include</span> <span class="cpf">&lt;iostream&gt;</span><span class="cp">
#include</span> <span class="cpf">&lt;functional&gt;</span><span class="c1"> // for C++ style function pointers (callbacks)</span><span class="cp">
</span>
<span class="k">template</span> <span class="o">&lt;</span><span class="k">typename</span> <span class="nc">T</span><span class="p">,</span> <span class="k">typename</span> <span class="nc">Deleter</span> <span class="o">=</span> <span class="n">std</span><span class="o">::</span><span class="n">function</span><span class="o">&lt;</span><span class="kt">void</span><span class="p">(</span><span class="n">T</span><span class="o">*</span><span class="p">)&gt;</span><span class="o">&gt;</span>
<span class="k">class</span> <span class="nc">UniquePtr</span>
<span class="p">{</span>
<span class="nl">public:</span>
    <span class="c1">// Constructor (default deleter uses `delete`)</span>
    <span class="c1">// for default value of deleter, set a normal function that deletes pointer : delete p;</span>
    <span class="k">explicit</span> <span class="n">UniquePtr</span><span class="p">(</span><span class="n">T</span><span class="o">*</span> <span class="n">ptr</span> <span class="o">=</span> <span class="nb">nullptr</span><span class="p">,</span> <span class="n">Deleter</span> <span class="n">deleter</span> <span class="o">=</span> <span class="p">[](</span><span class="n">T</span><span class="o">*</span> <span class="n">p</span><span class="p">)</span> <span class="p">{</span> <span class="k">delete</span> <span class="n">p</span><span class="p">;</span> <span class="p">})</span>
        <span class="o">:</span> <span class="n">m_Ptr</span><span class="p">(</span><span class="n">ptr</span><span class="p">),</span> <span class="n">m_Deleter</span><span class="p">(</span><span class="n">deleter</span><span class="p">)</span> <span class="p">{}</span>

    <span class="c1">// Destructor</span>
    <span class="o">~</span><span class="n">UniquePtr</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">m_Ptr</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="n">m_Deleter</span><span class="p">(</span><span class="n">m_Ptr</span><span class="p">);</span>
            <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"[DEBUG] Deleted object at "</span> <span class="o">&lt;&lt;</span> <span class="n">m_Ptr</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>
        <span class="p">}</span>
    <span class="p">}</span>

    <span class="c1">// Delete Copy Constructor &amp; Copy Assignment</span>
    <span class="n">UniquePtr</span><span class="p">(</span><span class="k">const</span> <span class="n">UniquePtr</span><span class="o">&amp;</span><span class="p">)</span> <span class="o">=</span> <span class="k">delete</span><span class="p">;</span>
    <span class="n">UniquePtr</span><span class="o">&amp;</span> <span class="k">operator</span><span class="o">=</span><span class="p">(</span><span class="k">const</span> <span class="n">UniquePtr</span><span class="o">&amp;</span><span class="p">)</span> <span class="o">=</span> <span class="k">delete</span><span class="p">;</span>

    <span class="c1">// Move Constructor</span>
    <span class="n">UniquePtr</span><span class="p">(</span><span class="n">UniquePtr</span><span class="o">&amp;&amp;</span> <span class="n">other</span><span class="p">)</span> <span class="k">noexcept</span>
        <span class="o">:</span> <span class="n">m_Ptr</span><span class="p">(</span><span class="n">other</span><span class="p">.</span><span class="n">m_Ptr</span><span class="p">),</span> <span class="n">m_Deleter</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">move</span><span class="p">(</span><span class="n">other</span><span class="p">.</span><span class="n">m_Deleter</span><span class="p">))</span>
    <span class="p">{</span>
        <span class="n">other</span><span class="p">.</span><span class="n">m_Ptr</span> <span class="o">=</span> <span class="nb">nullptr</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="c1">// Move Assignment</span>
    <span class="n">UniquePtr</span><span class="o">&amp;</span> <span class="k">operator</span><span class="o">=</span><span class="p">(</span><span class="n">UniquePtr</span><span class="o">&amp;&amp;</span> <span class="n">other</span><span class="p">)</span> <span class="k">noexcept</span>
    <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="k">this</span> <span class="o">!=</span> <span class="o">&amp;</span><span class="n">other</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="n">Reset</span><span class="p">();</span> <span class="c1">// Delete current resource</span>
            <span class="n">m_Ptr</span> <span class="o">=</span> <span class="n">other</span><span class="p">.</span><span class="n">m_Ptr</span><span class="p">;</span>
            <span class="n">m_Deleter</span> <span class="o">=</span> <span class="n">std</span><span class="o">::</span><span class="n">move</span><span class="p">(</span><span class="n">other</span><span class="p">.</span><span class="n">m_Deleter</span><span class="p">);</span>
            <span class="n">other</span><span class="p">.</span><span class="n">m_Ptr</span> <span class="o">=</span> <span class="nb">nullptr</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="k">return</span> <span class="o">*</span><span class="k">this</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="c1">// Overloaded Operators</span>
    <span class="n">T</span><span class="o">&amp;</span> <span class="k">operator</span><span class="o">*</span><span class="p">()</span> <span class="k">const</span> <span class="p">{</span> <span class="k">return</span> <span class="o">*</span><span class="n">m_Ptr</span><span class="p">;</span> <span class="p">}</span>
    <span class="n">T</span><span class="o">*</span> <span class="k">operator</span><span class="o">-&gt;</span><span class="p">()</span> <span class="k">const</span> <span class="p">{</span> <span class="k">return</span> <span class="n">m_Ptr</span><span class="p">;</span> <span class="p">}</span>

    <span class="c1">// Getter</span>
    <span class="n">T</span><span class="o">*</span> <span class="n">Get</span><span class="p">()</span> <span class="k">const</span> <span class="p">{</span> <span class="k">return</span> <span class="n">m_Ptr</span><span class="p">;</span> <span class="p">}</span>

    <span class="c1">// Reset function</span>
    <span class="kt">void</span> <span class="n">Reset</span><span class="p">(</span><span class="n">T</span><span class="o">*</span> <span class="n">newPtr</span> <span class="o">=</span> <span class="nb">nullptr</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">m_Ptr</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="n">m_Deleter</span><span class="p">(</span><span class="n">m_Ptr</span><span class="p">);</span>
            <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"[DEBUG] Reset deleted object at "</span> <span class="o">&lt;&lt;</span> <span class="n">m_Ptr</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="n">m_Ptr</span> <span class="o">=</span> <span class="n">newPtr</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="c1">// Release function (returns the raw pointer and removes ownership)</span>
    <span class="n">T</span><span class="o">*</span> <span class="n">Release</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="n">T</span><span class="o">*</span> <span class="n">temp</span> <span class="o">=</span> <span class="n">m_Ptr</span><span class="p">;</span>
        <span class="n">m_Ptr</span> <span class="o">=</span> <span class="nb">nullptr</span><span class="p">;</span>
        <span class="k">return</span> <span class="n">temp</span><span class="p">;</span>
    <span class="p">}</span>

<span class="nl">private:</span>
    <span class="n">T</span><span class="o">*</span> <span class="n">m_Ptr</span><span class="p">;</span>
    <span class="n">Deleter</span> <span class="n">m_Deleter</span><span class="p">;</span>
<span class="p">};</span>

<span class="c1">// for Arrays</span>
<span class="k">template</span> <span class="o">&lt;</span><span class="k">typename</span> <span class="nc">T</span><span class="p">,</span> <span class="k">typename</span> <span class="nc">Deleter</span><span class="p">&gt;</span>
<span class="k">class</span> <span class="nc">UniquePtr</span><span class="o">&lt;</span><span class="n">T</span><span class="p">[],</span> <span class="n">Deleter</span><span class="o">&gt;</span>
<span class="p">{</span>
<span class="nl">public:</span>
    <span class="c1">// Constructor</span>
    <span class="k">explicit</span> <span class="n">UniquePtr</span><span class="p">(</span><span class="n">T</span><span class="o">*</span> <span class="n">ptr</span> <span class="o">=</span> <span class="nb">nullptr</span><span class="p">,</span> <span class="n">Deleter</span> <span class="n">deleter</span> <span class="o">=</span> <span class="p">[](</span><span class="n">T</span><span class="o">*</span> <span class="n">p</span><span class="p">)</span> <span class="p">{</span> <span class="k">delete</span><span class="p">[]</span> <span class="n">p</span><span class="p">;</span> <span class="p">})</span>
        <span class="o">:</span> <span class="n">m_Ptr</span><span class="p">(</span><span class="n">ptr</span><span class="p">),</span> <span class="n">m_Deleter</span><span class="p">(</span><span class="n">deleter</span><span class="p">)</span> <span class="p">{}</span>

    <span class="c1">// Destructor</span>
    <span class="o">~</span><span class="n">UniquePtr</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">m_Ptr</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="n">m_Deleter</span><span class="p">(</span><span class="n">m_Ptr</span><span class="p">);</span>
            <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"[DEBUG] Deleted array at "</span> <span class="o">&lt;&lt;</span> <span class="n">m_Ptr</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>
        <span class="p">}</span>
    <span class="p">}</span>

    <span class="c1">// Delete Copy Constructor &amp; Copy Assignment</span>
    <span class="n">UniquePtr</span><span class="p">(</span><span class="k">const</span> <span class="n">UniquePtr</span><span class="o">&amp;</span><span class="p">)</span> <span class="o">=</span> <span class="k">delete</span><span class="p">;</span>
    <span class="n">UniquePtr</span><span class="o">&amp;</span> <span class="k">operator</span><span class="o">=</span><span class="p">(</span><span class="k">const</span> <span class="n">UniquePtr</span><span class="o">&amp;</span><span class="p">)</span> <span class="o">=</span> <span class="k">delete</span><span class="p">;</span>

    <span class="c1">// Move Constructor</span>
    <span class="n">UniquePtr</span><span class="p">(</span><span class="n">UniquePtr</span><span class="o">&amp;&amp;</span> <span class="n">other</span><span class="p">)</span> <span class="k">noexcept</span>
        <span class="o">:</span> <span class="n">m_Ptr</span><span class="p">(</span><span class="n">other</span><span class="p">.</span><span class="n">m_Ptr</span><span class="p">),</span> <span class="n">m_Deleter</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">move</span><span class="p">(</span><span class="n">other</span><span class="p">.</span><span class="n">m_Deleter</span><span class="p">))</span>
    <span class="p">{</span>
        <span class="n">other</span><span class="p">.</span><span class="n">m_Ptr</span> <span class="o">=</span> <span class="nb">nullptr</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="c1">// Move Assignment</span>
    <span class="n">UniquePtr</span><span class="o">&amp;</span> <span class="k">operator</span><span class="o">=</span><span class="p">(</span><span class="n">UniquePtr</span><span class="o">&amp;&amp;</span> <span class="n">other</span><span class="p">)</span> <span class="k">noexcept</span>
    <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="k">this</span> <span class="o">!=</span> <span class="o">&amp;</span><span class="n">other</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="n">Reset</span><span class="p">();</span>
            <span class="n">m_Ptr</span> <span class="o">=</span> <span class="n">other</span><span class="p">.</span><span class="n">m_Ptr</span><span class="p">;</span>
            <span class="n">m_Deleter</span> <span class="o">=</span> <span class="n">std</span><span class="o">::</span><span class="n">move</span><span class="p">(</span><span class="n">other</span><span class="p">.</span><span class="n">m_Deleter</span><span class="p">);</span>
            <span class="n">other</span><span class="p">.</span><span class="n">m_Ptr</span> <span class="o">=</span> <span class="nb">nullptr</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="k">return</span> <span class="o">*</span><span class="k">this</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="c1">// Overloaded Operator (array-style access)</span>
    <span class="n">T</span><span class="o">&amp;</span> <span class="k">operator</span><span class="p">[](</span><span class="kt">size_t</span> <span class="n">index</span><span class="p">)</span> <span class="k">const</span> <span class="p">{</span> <span class="k">return</span> <span class="n">m_Ptr</span><span class="p">[</span><span class="n">index</span><span class="p">];</span> <span class="p">}</span>

    <span class="c1">// Getter</span>
    <span class="n">T</span><span class="o">*</span> <span class="n">Get</span><span class="p">()</span> <span class="k">const</span> <span class="p">{</span> <span class="k">return</span> <span class="n">m_Ptr</span><span class="p">;</span> <span class="p">}</span>

    <span class="c1">// Reset function</span>
    <span class="kt">void</span> <span class="n">Reset</span><span class="p">(</span><span class="n">T</span><span class="o">*</span> <span class="n">newPtr</span> <span class="o">=</span> <span class="nb">nullptr</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">m_Ptr</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="n">m_Deleter</span><span class="p">(</span><span class="n">m_Ptr</span><span class="p">);</span>
            <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"[DEBUG] Reset deleted array at "</span> <span class="o">&lt;&lt;</span> <span class="n">m_Ptr</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="n">m_Ptr</span> <span class="o">=</span> <span class="n">newPtr</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="c1">// Release function</span>
    <span class="n">T</span><span class="o">*</span> <span class="n">Release</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="n">T</span><span class="o">*</span> <span class="n">temp</span> <span class="o">=</span> <span class="n">m_Ptr</span><span class="p">;</span>
        <span class="n">m_Ptr</span> <span class="o">=</span> <span class="nb">nullptr</span><span class="p">;</span>
        <span class="k">return</span> <span class="n">temp</span><span class="p">;</span>
    <span class="p">}</span>

<span class="nl">private:</span>
    <span class="n">T</span><span class="o">*</span> <span class="n">m_Ptr</span><span class="p">;</span>
    <span class="n">Deleter</span> <span class="n">m_Deleter</span><span class="p">;</span>
<span class="p">};</span>

<span class="kt">int</span> <span class="n">main</span><span class="p">()</span>
<span class="p">{</span>
    <span class="c1">// Managing a single object with default deleter</span>
    <span class="n">UniquePtr</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="n">singlePtr</span><span class="p">(</span><span class="k">new</span> <span class="kt">int</span><span class="p">(</span><span class="mi">42</span><span class="p">));</span>
    <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"Single Value: "</span> <span class="o">&lt;&lt;</span> <span class="o">*</span><span class="n">singlePtr</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>

    <span class="c1">// Managing a single object with a custom deleter</span>
    <span class="n">UniquePtr</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="n">customDelPtr</span><span class="p">(</span><span class="k">new</span> <span class="kt">int</span><span class="p">(</span><span class="mi">99</span><span class="p">),</span> <span class="p">[](</span><span class="kt">int</span><span class="o">*</span> <span class="n">p</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"[DEBUG] Custom deleter called for "</span> <span class="o">&lt;&lt;</span> <span class="o">*</span><span class="n">p</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>
        <span class="k">delete</span> <span class="n">p</span><span class="p">;</span>
    <span class="p">});</span>

    <span class="c1">// Managing a dynamic array with default deleter</span>
    <span class="n">UniquePtr</span><span class="o">&lt;</span><span class="kt">int</span><span class="p">[]</span><span class="o">&gt;</span> <span class="n">arrayPtr</span><span class="p">(</span><span class="k">new</span> <span class="kt">int</span><span class="p">[</span><span class="mi">5</span><span class="p">]{</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">});</span>
    <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"Array Values: "</span><span class="p">;</span>
    <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="mi">5</span><span class="p">;</span> <span class="o">++</span><span class="n">i</span><span class="p">)</span>
        <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="n">arrayPtr</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">&lt;&lt;</span> <span class="s">" "</span><span class="p">;</span>
    <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>

    <span class="c1">// Resetting a pointer</span>
    <span class="n">singlePtr</span><span class="p">.</span><span class="n">Reset</span><span class="p">(</span><span class="k">new</span> <span class="kt">int</span><span class="p">(</span><span class="mi">77</span><span class="p">));</span>
    <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"After Reset: "</span> <span class="o">&lt;&lt;</span> <span class="o">*</span><span class="n">singlePtr</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>

    <span class="c1">// Transferring ownership</span>
    <span class="n">UniquePtr</span><span class="o">&lt;</span><span class="kt">int</span><span class="p">[]</span><span class="o">&gt;</span> <span class="n">movedArray</span> <span class="o">=</span> <span class="n">std</span><span class="o">::</span><span class="n">move</span><span class="p">(</span><span class="n">arrayPtr</span><span class="p">);</span>
    <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="n">arrayPtr</span><span class="p">.</span><span class="n">Get</span><span class="p">())</span>
        <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"Ownership transferred successfully!"</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>

    <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div></div> </main> <hr> <footer> <p><a href="#top" id="back-to-top">Back to top</a></p> <div class="d-flex mt-2"> </div> </footer> </div> </div> <div class="search-overlay"></div> </div> <script src="https://cdn.jsdelivr.net/npm/mermaid@9.1.6/dist/mermaid.min.js"></script> <script> var config = {} ; mermaid.initialize(config); window.mermaid.init(undefined, document.querySelectorAll('.language-mermaid')); </script> </body> </html>
