<!DOCTYPE html> <html lang="en-US"> <head> <meta charset="UTF-8"> <meta http-equiv="X-UA-Compatible" content="IE=Edge"> <link rel="stylesheet" href="/assets/css/just-the-docs-default.css"> <link rel="stylesheet" href="/assets/css/just-the-docs-head-nav.css" id="jtd-head-nav-stylesheet"> <style id="jtd-nav-activation"> .site-nav > ul.nav-list:first-child > li > a, .site-nav > ul.nav-list:first-child > li > ul > li > a, .site-nav > ul.nav-list:first-child > li > ul > li > ul > li:not(:nth-child(6)) > a, .site-nav > ul.nav-list:first-child > li > ul > li > ul > li > ul > li a { background-image: none; } .site-nav > ul.nav-list:not(:first-child) a, .site-nav li.external a { background-image: none; } .site-nav > ul.nav-list:first-child > li:nth-child(2) > ul > li:nth-child(2) > ul > li:nth-child(6) > a { font-weight: 600; text-decoration: none; }.site-nav > ul.nav-list:first-child > li:nth-child(2) > button svg, .site-nav > ul.nav-list:first-child > li:nth-child(2) > ul > li:nth-child(2) > button svg, .site-nav > ul.nav-list:first-child > li:nth-child(2) > ul > li:nth-child(2) > ul > li:nth-child(6) > button svg { transform: rotate(-90deg); }.site-nav > ul.nav-list:first-child > li.nav-list-item:nth-child(2) > ul.nav-list, .site-nav > ul.nav-list:first-child > li.nav-list-item:nth-child(2) > ul.nav-list > li.nav-list-item:nth-child(2) > ul.nav-list, .site-nav > ul.nav-list:first-child > li.nav-list-item:nth-child(2) > ul.nav-list > li.nav-list-item:nth-child(2) > ul.nav-list > li.nav-list-item:nth-child(6) > ul.nav-list { display: block; } </style> <script src="/assets/js/vendor/lunr.min.js"></script> <script src="/assets/js/just-the-docs.js"></script> <meta name="viewport" content="width=device-width, initial-scale=1"> <link rel="icon" href="/assets/images/favicon.ico" type="image/x-icon"> <!-- Begin Jekyll SEO tag v2.8.0 --> <title>IPC - Message Passing | sanhan research</title> <meta name="generator" content="Jekyll v3.10.0" /> <meta property="og:title" content="IPC - Message Passing" /> <meta property="og:locale" content="en_US" /> <meta name="description" content="Lesson 5" /> <meta property="og:description" content="Lesson 5" /> <link rel="canonical" href="http://localhost:4000/docs/programming/concurrent-programming/06.%20IPC-Message-Passing.html" /> <meta property="og:url" content="http://localhost:4000/docs/programming/concurrent-programming/06.%20IPC-Message-Passing.html" /> <meta property="og:site_name" content="sanhan research" /> <meta property="og:type" content="website" /> <meta name="twitter:card" content="summary" /> <meta property="twitter:title" content="IPC - Message Passing" /> <meta name="google-site-verification" content="TumEYHq6xpSNuebLNUkEWUMOUm3w7a6mdrQ33DQPEwA" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"WebPage","description":"Lesson 5","headline":"IPC - Message Passing","url":"http://localhost:4000/docs/programming/concurrent-programming/06.%20IPC-Message-Passing.html"}</script> <!-- End Jekyll SEO tag --> <!-- Automatically display code inside script tags with type=math/tex using MathJax --> <script type="text/javascript" defer src="/assets/js/mathjax-script-type.js"> </script> <!-- Copied from https://docs.mathjax.org/en/latest/web/components/combined.html --> <script type="text/javascript" id="MathJax-script" defer src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-svg.js"> </script> </head> <body> <a class="skip-to-main" href="#main-content">Skip to main content</a> <svg xmlns="http://www.w3.org/2000/svg" class="d-none"> <symbol id="svg-link" viewBox="0 0 24 24"> <title>Link</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-link"> <path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path> </svg> </symbol> <symbol id="svg-menu" viewBox="0 0 24 24"> <title>Menu</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-menu"> <line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line> </svg> </symbol> <symbol id="svg-arrow-right" viewBox="0 0 24 24"> <title>Expand</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevron-right"> <polyline points="9 18 15 12 9 6"></polyline> </svg> </symbol> <!-- Feather. MIT License: https://github.com/feathericons/feather/blob/master/LICENSE --> <symbol id="svg-external-link" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-external-link"> <title id="svg-external-link-title">(external link)</title> <path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"></path><polyline points="15 3 21 3 21 9"></polyline><line x1="10" y1="14" x2="21" y2="3"></line> </symbol> <symbol id="svg-doc" viewBox="0 0 24 24"> <title>Document</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-file"> <path d="M13 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V9z"></path><polyline points="13 2 13 9 20 9"></polyline> </svg> </symbol> <symbol id="svg-search" viewBox="0 0 24 24"> <title>Search</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-search"> <circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line> </svg> </symbol> <!-- Bootstrap Icons. MIT License: https://github.com/twbs/icons/blob/main/LICENSE.md --> <symbol id="svg-copy" viewBox="0 0 16 16"> <title>Copy</title> <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-clipboard" viewBox="0 0 16 16"> <path d="M4 1.5H3a2 2 0 0 0-2 2V14a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V3.5a2 2 0 0 0-2-2h-1v1h1a1 1 0 0 1 1 1V14a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1V3.5a1 1 0 0 1 1-1h1v-1z"/> <path d="M9.5 1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-1a.5.5 0 0 1 .5-.5h3zm-3-1A1.5 1.5 0 0 0 5 1.5v1A1.5 1.5 0 0 0 6.5 4h3A1.5 1.5 0 0 0 11 2.5v-1A1.5 1.5 0 0 0 9.5 0h-3z"/> </svg> </symbol> <symbol id="svg-copied" viewBox="0 0 16 16"> <title>Copied</title> <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-clipboard-check-fill" viewBox="0 0 16 16"> <path d="M6.5 0A1.5 1.5 0 0 0 5 1.5v1A1.5 1.5 0 0 0 6.5 4h3A1.5 1.5 0 0 0 11 2.5v-1A1.5 1.5 0 0 0 9.5 0h-3Zm3 1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-1a.5.5 0 0 1 .5-.5h3Z"/> <path d="M4 1.5H3a2 2 0 0 0-2 2V14a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V3.5a2 2 0 0 0-2-2h-1v1A2.5 2.5 0 0 1 9.5 5h-3A2.5 2.5 0 0 1 4 2.5v-1Zm6.854 7.354-3 3a.5.5 0 0 1-.708 0l-1.5-1.5a.5.5 0 0 1 .708-.708L7.5 10.793l2.646-2.647a.5.5 0 0 1 .708.708Z"/> </svg> </symbol> </svg> <div class="side-bar"> <div class="site-header" role="banner"> <a href="/" class="site-title lh-tight"> sanhan research </a> <button id="menu-button" class="site-button btn-reset" aria-label="Toggle menu" aria-pressed="false"> <svg viewBox="0 0 24 24" class="icon" aria-hidden="true"><use xlink:href="#svg-menu"></use></svg> </button> </div> <nav aria-label="Main" id="site-nav" class="site-nav"> <ul class="nav-list"><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in AI Research category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/docs/ai-research" class="nav-list-link">AI Research</a><ul class="nav-list"><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in ARC-AGI category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/docs/ai-research/arc-agi" class="nav-list-link">ARC-AGI</a><ul class="nav-list"><li class="nav-list-item"><a href="/docs/ai-research/arc-agi/dataset" class="nav-list-link">ARC-AGI dataset</a></li><li class="nav-list-item"><a href="/docs/ai-research/arc-agi/resarch-note" class="nav-list-link">Research on ARC-AGI</a></li></ul></li><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in LLM category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/docs/ai-research/llm" class="nav-list-link">LLM</a><ul class="nav-list"><li class="nav-list-item"><a href="/docs/ai-research/llm/utilizations" class="nav-list-link">LLM Utilizations</a></li><li class="nav-list-item"><a href="/docs/ai-research/llm/control-theory" class="nav-list-link">Control theory of LLM</a></li></ul></li><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in Computer Vision category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/docs/ai-research/computer-vision" class="nav-list-link">Computer Vision</a><ul class="nav-list"><li class="nav-list-item"><a href="/docs/ai-research/computer-vision/3d-reconstruction" class="nav-list-link">3D Image Reconstruction</a></li></ul></li><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in Machine Unlearning category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/docs/ai-research/unlearning" class="nav-list-link">Machine Unlearning</a><ul class="nav-list"><li class="nav-list-item"><a href="/docs/ai-research/unlearning/resarch-note" class="nav-list-link">Research on Machine Unlearning</a></li></ul></li></ul></li><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in Programming category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/docs/programming" class="nav-list-link">Programming</a><ul class="nav-list"><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in Algorithms and Data structures category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/docs/programming/algorithms" class="nav-list-link">Algorithms and Data structures</a><ul class="nav-list"><li class="nav-list-item"><a href="/docs/programming/algorithms/Useful%20Timer%20Class.html" class="nav-list-link">Useful Timer Class</a></li></ul></li><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in Concurrent Programming category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/docs/programming/concurrent-programming" class="nav-list-link">Concurrent Programming</a><ul class="nav-list"><li class="nav-list-item"><a href="/docs/programming/concurrent-programming/01.%20Introduction.html" class="nav-list-link">01. Introduction</a></li><li class="nav-list-item"><a href="/docs/programming/concurrent-programming/02.%20Multitasking.html" class="nav-list-link">02. Multitasking</a></li><li class="nav-list-item"><a href="/docs/programming/concurrent-programming/03.%20Multiprocessing.html" class="nav-list-link">03. Multiprocessing</a></li><li class="nav-list-item"><a href="/docs/programming/concurrent-programming/04.%20Multithreading.html" class="nav-list-link">04. Multithreading</a></li><li class="nav-list-item"><a href="/docs/programming/concurrent-programming/05.%20IPC.html" class="nav-list-link">05. Inter-Process Communication (IPC)</a></li><li class="nav-list-item"><a href="/docs/programming/concurrent-programming/06.%20IPC-Message-Passing.html" class="nav-list-link">06. IPC - Message Passing</a></li><li class="nav-list-item"><a href="/docs/programming/concurrent-programming/07.%20IPC-Shared-Memory.html" class="nav-list-link">07. IPC - Shared Memory</a></li><li class="nav-list-item"><a href="/docs/programming/concurrent-programming/08.%20Decomposition.html" class="nav-list-link">08. Decomposition</a></li><li class="nav-list-item"><a href="/docs/programming/concurrent-programming/09.%20Decomposition%20-%20Task.html" class="nav-list-link">09. Decomposition - Task Parallelism</a></li><li class="nav-list-item"><a href="/docs/programming/concurrent-programming/10.%20Decomposition%20-%20Data.html" class="nav-list-link">10. Decomposition - Data Parallelism</a></li><li class="nav-list-item"><a href="/docs/programming/concurrent-programming/11.%20Synchronization.html" class="nav-list-link">11. Synchronization</a></li><li class="nav-list-item"><a href="/docs/programming/concurrent-programming/12.%20Synchronization%20-%20Mutexes%20and%20Semaphores.html" class="nav-list-link">12. Synchronization - Mutexes and Semaphores</a></li><li class="nav-list-item"><a href="/docs/programming/concurrent-programming/13.%20Synchronization%20-%20Deadlocks.html" class="nav-list-link">13. Synchronization - Deadlock</a></li><li class="nav-list-item"><a href="/docs/programming/concurrent-programming/14.%20Synchronization%20-%20Starvation.html" class="nav-list-link">14. Synchronization - Starvation</a></li><li class="nav-list-item"><a href="/docs/programming/concurrent-programming/15.%20Synchronization%20-%20RWLocks%20and%20Spin%20Locks.html" class="nav-list-link">15. Synchronization - RWLock, Spin Lock</a></li></ul></li><li class="nav-list-item"><a href="/docs/programming/c-cpp" class="nav-list-link">C / C++</a></li><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in Python category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/docs/programming/python" class="nav-list-link">Python</a><ul class="nav-list"><li class="nav-list-item"><a href="/docs/programming/python/01.%20Typing.html" class="nav-list-link">01. Typing</a></li><li class="nav-list-item"><a href="/docs/programming/python/02.%20Decorator.html" class="nav-list-link">02. Decorators</a></li></ul></li><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in Rust category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/docs/programming/rust" class="nav-list-link">Rust</a><ul class="nav-list"><li class="nav-list-item"><a href="/docs/programming/rust/introduction" class="nav-list-link">01. Hello, World!</a></li><li class="nav-list-item"><a href="/docs/programming/rust/basic-syntax" class="nav-list-link">02. Basic Syntax in Rust</a></li><li class="nav-list-item"><a href="/docs/programming/rust/memory-related" class="nav-list-link">03. Pointers in Rust</a></li></ul></li></ul></li><li class="nav-list-item"><a href="/docs/mathematics" class="nav-list-link">Mathematics</a></li><li class="nav-list-item"><a href="/docs/devlog" class="nav-list-link">Devlog</a></li><li class="nav-list-item"><a href="/docs/about.html" class="nav-list-link">About</a></li></ul> <ul class="nav-list"><li class="nav-list-item external"> <a href="https://github.com/Sangdo-Han" class="nav-list-link external" > GitHub <svg viewBox="0 0 24 24" aria-labelledby="svg-external-link-title"><use xlink:href="#svg-external-link"></use></svg> </a> </li></ul> </nav> <footer class="site-footer"> This site uses <a href="https://github.com/just-the-docs/just-the-docs">Just the Docs</a>, a documentation theme for Jekyll. </footer> </div> <div class="main" id="top"> <div id="main-header" class="main-header"> <div class="search" role="search"> <div class="search-input-wrap"> <input type="text" id="search-input" class="search-input" tabindex="0" placeholder="Search sanhan research" aria-label="Search sanhan research" autocomplete="off"> <label for="search-input" class="search-label"><svg viewBox="0 0 24 24" class="search-icon"><use xlink:href="#svg-search"></use></svg></label> </div> <div id="search-results" class="search-results"></div> </div> </div> <div class="main-content-wrap"> <nav aria-label="Breadcrumb" class="breadcrumb-nav"> <ol class="breadcrumb-nav-list"> <li class="breadcrumb-nav-list-item"><a href="/docs/programming">Programming</a></li> <li class="breadcrumb-nav-list-item"><a href="/docs/programming/concurrent-programming">Concurrent Programming</a></li> <li class="breadcrumb-nav-list-item"><span>06. IPC - Message Passing</span></li> </ol> </nav> <div id="main-content" class="main-content"> <main> <h1 id="message-passing-ipc"> <a href="#message-passing-ipc" class="anchor-heading" aria-labelledby="message-passing-ipc"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Message-Passing IPC </h1> <p>Message-passing IPC provides a structured way for tasks to communicate without directly sharing memory. It is widely used in distributed systems and multiprocessing environments where isolation between processes is crucial.</p> <p>In message-passing IPC, each task is identified by a unique name, and tasks interact by sending and receiving messages to and from named tasks.</p> <p>The OS establishes a communication channel and provides proper system calls for tasks to pass messages through this channel.</p> <p>The advantage of Message-Passing is that the OS manages the channel, providing a useful interface to send and receive data without conflict. However, there is a huge communication cost. To transfer any piece of information between tasks, information must be copied from the task’s user space to the OS channel through system calls and then copied back to the address space of the receiving task.</p> <details open=""> <summary class="text-delta"> Table of contents </summary> <ul id="markdown-toc"> <li><a href="#message-passing-ipc" id="markdown-toc-message-passing-ipc">Message-Passing IPC</a> <ul> <li><a href="#pipe" id="markdown-toc-pipe">Pipe</a> <ul> <li><a href="#python-example" id="markdown-toc-python-example">Python Example</a></li> <li><a href="#c-example" id="markdown-toc-c-example">C++ Example</a></li> </ul> </li> <li><a href="#message-queue" id="markdown-toc-message-queue">Message Queue</a> <ul> <li><a href="#python-example-1" id="markdown-toc-python-example-1">Python Example</a></li> <li><a href="#c-example-1" id="markdown-toc-c-example-1">C++ Example</a></li> </ul> </li> <li><a href="#socket" id="markdown-toc-socket">Socket</a> <ul> <li><a href="#python-example-2" id="markdown-toc-python-example-2">Python Example</a></li> <li><a href="#c-example-2" id="markdown-toc-c-example-2">C++ Example</a></li> </ul> </li> <li><a href="#conclusion" id="markdown-toc-conclusion">Conclusion</a></li> </ul> </li> </ul> </details> <h2 id="pipe"> <a href="#pipe" class="anchor-heading" aria-labelledby="pipe"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Pipe </h2> <p>Pipes provide a unidirectional communication channel between two processes (one-to-one, one way, write then read). They are commonly used for parent-child process communication and allow data transfer in a sequential manner.</p><pre><code class="language-mermaid"> 
sequenceDiagram
    participant Process A
    participant Pipe
    participant Process B

    Process A-&gt;&gt;Pipe: Write Data
    Pipe--&gt;&gt;Process B: Read Data
    Process B-&gt;&gt;Process B: Process Data

</code></pre><h3 id="python-example"> <a href="#python-example" class="anchor-heading" aria-labelledby="python-example"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Python Example </h3> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="nn">time</span>
<span class="kn">import</span> <span class="nn">threading</span>
<span class="kn">from</span> <span class="nn">threading</span> <span class="kn">import</span> <span class="n">Thread</span>

<span class="kn">from</span> <span class="nn">multiprocessing</span> <span class="kn">import</span> <span class="n">Pipe</span>
<span class="kn">from</span> <span class="nn">multiprocessing.connection</span> <span class="kn">import</span> <span class="n">Connection</span>

<span class="kn">from</span> <span class="nn">utils</span> <span class="kn">import</span> <span class="n">Timer</span> <span class="c1">## (ref) - algorithm tab - Useful Timer Class
</span>
<span class="k">class</span> <span class="nc">WriterThread</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span><span class="nb">str</span><span class="p">,</span> <span class="n">conn</span><span class="p">:</span><span class="n">Connection</span><span class="p">,</span> <span class="n">data</span><span class="p">:</span><span class="nb">list</span><span class="o">=</span><span class="p">[]):</span>
        <span class="bp">self</span><span class="p">.</span><span class="n">conn</span> <span class="o">=</span> <span class="n">conn</span>
        <span class="bp">self</span><span class="p">.</span><span class="n">data</span> <span class="o">=</span> <span class="n">data</span>
        <span class="bp">self</span><span class="p">.</span><span class="n">_thread</span> <span class="o">=</span> <span class="n">Thread</span><span class="p">(</span>
            <span class="n">target</span><span class="o">=</span><span class="bp">self</span><span class="p">.</span><span class="n">do_thread_job</span><span class="p">,</span>
            <span class="n">name</span><span class="o">=</span><span class="n">name</span><span class="p">,</span>
        <span class="p">)</span>

    <span class="k">def</span> <span class="nf">start</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="p">.</span><span class="n">_thread</span><span class="p">.</span><span class="n">start</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">join</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="p">.</span><span class="n">_thread</span><span class="p">.</span><span class="n">join</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">do_thread_job</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">print</span><span class="p">(</span><span class="sa">f</span><span class="s">"</span><span class="si">{</span><span class="bp">self</span><span class="p">.</span><span class="n">_thread</span><span class="p">.</span><span class="n">name</span><span class="si">}</span><span class="s"> thread: </span><span class="si">{</span><span class="n">threading</span><span class="p">.</span><span class="n">current_thread</span><span class="p">()</span><span class="si">}</span><span class="s">"</span><span class="p">)</span>
        <span class="n">time</span><span class="p">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
        <span class="bp">self</span><span class="p">.</span><span class="n">conn</span><span class="p">.</span><span class="n">send</span><span class="p">(</span><span class="bp">self</span><span class="p">.</span><span class="n">data</span><span class="p">)</span>

<span class="k">class</span> <span class="nc">ReceiverThread</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span><span class="nb">str</span><span class="p">,</span> <span class="n">conn</span><span class="p">:</span> <span class="n">Connection</span><span class="p">):</span>
        <span class="bp">self</span><span class="p">.</span><span class="n">conn</span> <span class="o">=</span> <span class="n">conn</span>
        <span class="bp">self</span><span class="p">.</span><span class="n">_thread</span> <span class="o">=</span> <span class="n">Thread</span><span class="p">(</span>
            <span class="n">target</span><span class="o">=</span><span class="bp">self</span><span class="p">.</span><span class="n">do_thread_job</span><span class="p">,</span>
            <span class="n">name</span><span class="o">=</span><span class="n">name</span>
        <span class="p">)</span>

    <span class="k">def</span> <span class="nf">start</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="p">.</span><span class="n">_thread</span><span class="p">.</span><span class="n">start</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">join</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="p">.</span><span class="n">_thread</span><span class="p">.</span><span class="n">join</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">do_thread_job</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">print</span><span class="p">(</span><span class="sa">f</span><span class="s">"</span><span class="si">{</span><span class="bp">self</span><span class="p">.</span><span class="n">_thread</span><span class="p">.</span><span class="n">name</span><span class="si">}</span><span class="s"> thread: </span><span class="si">{</span><span class="n">threading</span><span class="p">.</span><span class="n">current_thread</span><span class="p">()</span><span class="si">}</span><span class="s">"</span><span class="p">)</span>
        <span class="n">messages</span> <span class="o">=</span> <span class="bp">self</span><span class="p">.</span><span class="n">conn</span><span class="p">.</span><span class="n">recv</span><span class="p">()</span>
        <span class="k">print</span><span class="p">(</span><span class="n">messages</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">main</span><span class="p">():</span>
    <span class="n">timer</span> <span class="o">=</span> <span class="n">Timer</span><span class="p">()</span>
    <span class="n">conn1</span><span class="p">,</span> <span class="n">conn2</span> <span class="o">=</span> <span class="n">Pipe</span><span class="p">()</span>

    <span class="n">writer_thread</span> <span class="o">=</span> <span class="n">WriterThread</span><span class="p">(</span>
        <span class="n">name</span><span class="o">=</span><span class="s">"writer"</span><span class="p">,</span>
        <span class="n">conn</span><span class="o">=</span><span class="n">conn1</span><span class="p">,</span>
        <span class="n">data</span><span class="o">=</span><span class="p">[</span><span class="s">"Hello World!"</span><span class="p">,</span> <span class="s">"why so serious"</span><span class="p">]</span>
    <span class="p">)</span>
    <span class="n">receiver_thread</span> <span class="o">=</span> <span class="n">ReceiverThread</span><span class="p">(</span>
        <span class="n">name</span><span class="o">=</span><span class="s">"receiver"</span><span class="p">,</span>
        <span class="n">conn</span><span class="o">=</span><span class="n">conn2</span>
    <span class="p">)</span>

    <span class="n">threads</span> <span class="o">=</span> <span class="p">[</span><span class="n">writer_thread</span><span class="p">,</span> <span class="n">receiver_thread</span><span class="p">]</span>
    <span class="k">for</span> <span class="n">thread_</span> <span class="ow">in</span> <span class="n">threads</span><span class="p">:</span>
        <span class="n">thread_</span><span class="p">.</span><span class="n">start</span><span class="p">()</span>
    
    <span class="k">for</span> <span class="n">thread_</span> <span class="ow">in</span> <span class="n">threads</span><span class="p">:</span>
        <span class="n">thread_</span><span class="p">.</span><span class="n">join</span><span class="p">()</span>

<span class="k">if</span> <span class="s">"__main__"</span> <span class="o">==</span> <span class="n">__name__</span><span class="p">:</span>
    <span class="n">main</span><span class="p">()</span>
</code></pre></div></div> <h3 id="c-example"> <a href="#c-example" class="anchor-heading" aria-labelledby="c-example"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> C++ Example </h3> <p>In C++, we need to use OS dependent headers to use message passing IPC. In the following examples, we will use UNIX (POSIX) dependent libraries (i.e. <code class="language-plaintext highlighter-rouge">unistd.h</code>).</p> <div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">#include</span> <span class="cpf">&lt;iostream&gt;</span><span class="cp">
#include</span> <span class="cpf">&lt;thread&gt;</span><span class="cp">
#include</span> <span class="cpf">&lt;string&gt;</span><span class="cp">
#include</span> <span class="cpf">&lt;chrono&gt;</span><span class="cp">
#include</span> <span class="cpf">&lt;vector&gt;</span><span class="cp">
#include</span> <span class="cpf">&lt;sstream&gt;</span><span class="cp">
#include</span> <span class="cpf">&lt;cstring&gt;</span><span class="cp">
</span><span class="c1">// UNIX dependency - POSIX . Not working in Windows</span>
<span class="cp">#include</span> <span class="cpf">&lt;unistd.h&gt;</span><span class="c1"> // for pipe(), write(), read()</span><span class="cp">
</span>
<span class="cp">#include</span> <span class="cpf">"Timer.h"</span><span class="c1"> // (ref) - algorithm tab - Useful Timer Class</span><span class="cp">
</span>
<span class="k">struct</span> <span class="nc">ThreadMessage</span>
<span class="p">{</span>
    <span class="kt">int</span> <span class="n">messageNumber</span><span class="p">;</span>
    <span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="n">message</span><span class="p">;</span>
<span class="p">};</span>

<span class="k">class</span> <span class="nc">PipedThread</span>
<span class="p">{</span>
<span class="nl">public:</span>
    <span class="n">PipedThread</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="n">name</span><span class="p">,</span> <span class="kt">int</span> <span class="n">pipeNum</span><span class="p">,</span> <span class="kt">int</span> <span class="n">numMessages</span><span class="p">,</span> <span class="kt">void</span><span class="p">(</span><span class="o">*</span><span class="n">threadJob</span><span class="p">)(</span><span class="kt">int</span><span class="p">,</span> <span class="kt">int</span><span class="p">))</span> <span class="c1">// use function pointer</span>
    <span class="o">:</span><span class="n">m_Name</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>
    <span class="p">,</span><span class="n">m_PipeNum</span><span class="p">(</span><span class="n">pipeNum</span><span class="p">)</span>
    <span class="p">,</span><span class="n">m_Thread</span><span class="p">(</span><span class="n">threadJob</span><span class="p">,</span> <span class="n">pipeNum</span><span class="p">,</span> <span class="n">numMessages</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"Initiated "</span> <span class="o">&lt;&lt;</span> <span class="n">m_Name</span> <span class="o">&lt;&lt;</span><span class="s">" Thread: "</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">this_thread</span><span class="o">::</span><span class="n">get_id</span><span class="p">()</span> <span class="o">&lt;&lt;</span> <span class="s">"</span><span class="se">\n</span><span class="s">"</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="kt">void</span> <span class="n">Join</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="n">m_Thread</span><span class="p">.</span><span class="n">join</span><span class="p">();</span>
    <span class="p">}</span>
<span class="nl">private:</span>
    <span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="n">m_Name</span><span class="p">;</span>
    <span class="n">std</span><span class="o">::</span><span class="kr">thread</span> <span class="n">m_Thread</span><span class="p">;</span>
    <span class="kt">int</span> <span class="n">m_PipeNum</span><span class="p">;</span>
<span class="p">};</span>

<span class="kt">void</span> <span class="n">WriteToPipe</span><span class="p">(</span><span class="k">const</span> <span class="kt">int</span> <span class="n">writeFd</span><span class="p">,</span> <span class="k">const</span> <span class="kt">int</span> <span class="n">numMessages</span><span class="p">)</span>
<span class="p">{</span>
    <span class="k">using</span> <span class="k">namespace</span> <span class="n">std</span><span class="o">::</span><span class="n">chrono_literals</span><span class="p">;</span>
    <span class="n">std</span><span class="o">::</span><span class="n">stringstream</span> <span class="n">message</span><span class="p">[</span><span class="n">numMessages</span><span class="p">];</span>

    <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span> <span class="n">i</span><span class="o">&lt;</span><span class="n">numMessages</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="n">std</span><span class="o">::</span><span class="n">this_thread</span><span class="o">::</span><span class="n">sleep_for</span><span class="p">(</span><span class="mx">1s</span><span class="p">);</span>
        <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">j</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span> <span class="n">j</span><span class="o">&lt;</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">;</span> <span class="n">j</span><span class="o">++</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="n">message</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">&lt;&lt;</span> <span class="s">"Pika! "</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="n">stringMessage</span> <span class="o">=</span> <span class="n">message</span><span class="p">[</span><span class="n">i</span><span class="p">].</span><span class="n">str</span><span class="p">();</span>
        <span class="n">ThreadMessage</span> <span class="n">messageWritten</span> <span class="o">=</span> <span class="p">{</span><span class="n">i</span><span class="p">,</span> <span class="n">stringMessage</span><span class="p">};</span>
        <span class="n">write</span><span class="p">(</span><span class="n">writeFd</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">messageWritten</span><span class="p">,</span> <span class="k">sizeof</span><span class="p">(</span><span class="n">messageWritten</span><span class="p">));</span>
        <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"[Writer] Message "</span> <span class="o">&lt;&lt;</span> <span class="n">i</span><span class="o">+</span><span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="s">" Sented </span><span class="se">\n</span><span class="s">"</span><span class="p">;</span>  
    <span class="p">}</span>
<span class="p">}</span>

<span class="kt">void</span> <span class="n">ReadFromPipe</span><span class="p">(</span><span class="k">const</span> <span class="kt">int</span> <span class="n">readerFd</span><span class="p">,</span> <span class="k">const</span> <span class="kt">int</span> <span class="n">numMessages</span><span class="p">)</span>
<span class="p">{</span>
    <span class="n">std</span><span class="o">::</span><span class="n">stringstream</span> <span class="n">messages</span><span class="p">[</span><span class="n">numMessages</span><span class="p">];</span>

    <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">numMessages</span> <span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="n">ThreadMessage</span> <span class="n">messageReceived</span><span class="p">;</span>
        <span class="n">read</span><span class="p">(</span><span class="n">readerFd</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">messageReceived</span><span class="p">,</span> <span class="k">sizeof</span><span class="p">(</span><span class="n">messageReceived</span><span class="p">));</span>
        <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"[Reader] Message "</span> <span class="o">&lt;&lt;</span> <span class="n">i</span><span class="o">+</span><span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="s">" was "</span> <span class="o">&lt;&lt;</span> <span class="n">messageReceived</span><span class="p">.</span><span class="n">message</span> <span class="o">&lt;&lt;</span><span class="s">"</span><span class="se">\n</span><span class="s">"</span><span class="p">;</span>  

    <span class="p">}</span>

<span class="p">}</span>

<span class="kt">int</span> <span class="n">main</span><span class="p">()</span>
<span class="p">{</span>
    <span class="n">Timer</span> <span class="n">timer</span><span class="p">;</span>

    <span class="kt">int</span> <span class="n">pipeFds</span><span class="p">[</span><span class="mi">2</span><span class="p">];</span>
    <span class="k">const</span> <span class="kt">int</span> <span class="n">numMessages</span> <span class="o">=</span> <span class="mi">2</span><span class="p">;</span>

    <span class="k">if</span> <span class="p">(</span><span class="n">pipe</span><span class="p">(</span><span class="n">pipeFds</span><span class="p">)</span> <span class="o">==</span> <span class="o">-</span><span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">std</span><span class="o">::</span><span class="n">cerr</span> <span class="o">&lt;&lt;</span> <span class="s">"Pipe creation failed!</span><span class="se">\n</span><span class="s">"</span><span class="p">;</span>
        <span class="k">return</span> <span class="mi">1</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="n">PipedThread</span> <span class="n">writerThread</span> <span class="o">=</span> <span class="p">{</span><span class="s">"Writer"</span><span class="p">,</span> <span class="n">pipeFds</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">numMessages</span><span class="p">,</span> <span class="n">WriteToPipe</span><span class="p">};</span> <span class="c1">// 1 is writer</span>
    <span class="n">PipedThread</span> <span class="n">readerThread</span> <span class="o">=</span> <span class="p">{</span><span class="s">"Reader"</span><span class="p">,</span> <span class="n">pipeFds</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">numMessages</span><span class="p">,</span> <span class="n">ReadFromPipe</span><span class="p">};</span>  <span class="c1">// 0 is reader</span>

    <span class="n">writerThread</span><span class="p">.</span><span class="n">Join</span><span class="p">();</span>
    <span class="n">readerThread</span><span class="p">.</span><span class="n">Join</span><span class="p">();</span>
<span class="p">}</span>
</code></pre></div></div> <p>The expected output will be as follows:</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Initiated Writer Thread: 0x1ef558c00
Initiated Reader Thread: 0x1ef558c00
<span class="o">[</span>Writer] Message 1 Sented 
<span class="o">[</span>Reader] Message 1 was Pika! 
<span class="o">[</span>Writer] Message 2 Sented 
<span class="o">[</span>Reader] Message 2 was Pika! Pika! 
Process Ended <span class="k">in </span>2.00611 <span class="o">[</span>s].
</code></pre></div></div> <h2 id="message-queue"> <a href="#message-queue" class="anchor-heading" aria-labelledby="message-queue"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Message Queue </h2> <p>Message queues allow multiple processes to exchange discrete messages asynchronously. This mechanism ensures structured communication and enables better decoupling of process execution.</p><pre><code class="language-mermaid"> 
sequenceDiagram
    participant Process A
    participant Process B
    participant Process C
    participant Message Queue
    participant Process D
    participant Process E

    Process A-&gt;&gt;Message Queue: Send Message 1
    Process B-&gt;&gt;Message Queue: Send Message 2
    Process C-&gt;&gt;Message Queue: Send Message 3
    
    Message Queue--&gt;&gt;Process D: Deliver Message 1
    Message Queue--&gt;&gt;Process E: Deliver Message 2
    Message Queue--&gt;&gt;Process D: Deliver Message 3

    Process D-&gt;&gt;Process D: Process Message 1 &amp; 3
    Process E-&gt;&gt;Process E: Process Message 2
</code></pre><h3 id="python-example-1"> <a href="#python-example-1" class="anchor-heading" aria-labelledby="python-example-1"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Python Example </h3> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">from</span> <span class="nn">queue</span> <span class="kn">import</span> <span class="n">Queue</span>
<span class="kn">from</span> <span class="nn">threading</span> <span class="kn">import</span> <span class="n">Thread</span><span class="p">,</span> <span class="n">current_thread</span>
<span class="kn">from</span> <span class="nn">utils</span> <span class="kn">import</span> <span class="n">Timer</span>

<span class="k">class</span> <span class="nc">QueueSwaper</span><span class="p">(</span><span class="n">Thread</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">queue_in</span><span class="p">:</span> <span class="n">Queue</span><span class="p">,</span> <span class="n">queue_out</span><span class="p">:</span> <span class="n">Queue</span><span class="p">,</span> <span class="nb">id</span><span class="p">:</span> <span class="nb">int</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">().</span><span class="n">__init__</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="nb">str</span><span class="p">(</span><span class="nb">id</span><span class="p">))</span>
        <span class="bp">self</span><span class="p">.</span><span class="n">queue_in</span> <span class="o">=</span> <span class="n">queue_in</span>
        <span class="bp">self</span><span class="p">.</span><span class="n">queue_out</span> <span class="o">=</span> <span class="n">queue_out</span>

    <span class="k">def</span> <span class="nf">run</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="bp">None</span><span class="p">:</span>
        <span class="k">while</span> <span class="ow">not</span> <span class="bp">self</span><span class="p">.</span><span class="n">queue_in</span><span class="p">.</span><span class="n">empty</span><span class="p">():</span>
            <span class="n">item</span> <span class="o">=</span> <span class="bp">self</span><span class="p">.</span><span class="n">queue_in</span><span class="p">.</span><span class="n">get</span><span class="p">()</span>
            <span class="bp">self</span><span class="p">.</span><span class="n">queue_out</span><span class="p">.</span><span class="n">put</span><span class="p">(</span><span class="sa">f</span><span class="s">"Thread-</span><span class="si">{</span><span class="n">current_thread</span><span class="si">}</span><span class="s">: Data - </span><span class="si">{</span><span class="n">item</span><span class="si">}</span><span class="s">"</span><span class="p">)</span>


<span class="k">def</span> <span class="nf">main</span><span class="p">(</span><span class="n">num_items</span><span class="p">:</span><span class="nb">int</span><span class="p">,</span> <span class="n">num_threads</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="bp">None</span><span class="p">:</span>
    <span class="n">queue_in</span> <span class="o">=</span> <span class="n">Queue</span><span class="p">()</span>
    <span class="n">queue_out</span> <span class="o">=</span> <span class="n">Queue</span><span class="p">()</span>

    <span class="k">for</span> <span class="n">item_number</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">num_items</span><span class="p">):</span>
        <span class="n">queue_in</span><span class="p">.</span><span class="n">put</span><span class="p">(</span><span class="n">item_number</span><span class="p">)</span>

    <span class="n">threads</span> <span class="o">=</span> <span class="p">[]</span>

    <span class="k">for</span> <span class="n">thread_idx</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">num_threads</span><span class="p">):</span>
        <span class="n">thread_</span> <span class="o">=</span> <span class="n">QueueSwaper</span><span class="p">(</span><span class="n">queue_in</span><span class="p">,</span> <span class="n">queue_out</span><span class="p">,</span> <span class="n">thread_idx</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span>
        <span class="n">threads</span><span class="p">.</span><span class="n">append</span><span class="p">(</span><span class="n">thread_</span><span class="p">)</span>

    <span class="k">for</span> <span class="n">thread_</span> <span class="ow">in</span> <span class="n">threads</span><span class="p">:</span>
        <span class="n">thread_</span><span class="p">.</span><span class="n">start</span><span class="p">()</span>

    <span class="k">for</span> <span class="n">thread_</span> <span class="ow">in</span> <span class="n">threads</span><span class="p">:</span>
        <span class="n">thread_</span><span class="p">.</span><span class="n">join</span><span class="p">()</span>

    <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">queue_out</span><span class="p">.</span><span class="n">queue</span><span class="p">:</span>
        <span class="k">print</span><span class="p">(</span><span class="n">item</span><span class="p">)</span>

<span class="k">if</span> <span class="s">"__main__"</span> <span class="o">==</span> <span class="n">__name__</span><span class="p">:</span>
    <span class="n">num_threads</span><span class="p">:</span> <span class="nb">int</span>   <span class="o">=</span> <span class="mi">2</span>
    <span class="n">num_items</span><span class="p">:</span> <span class="nb">int</span>     <span class="o">=</span> <span class="mi">65545</span>
    <span class="n">timer</span><span class="p">:</span> <span class="n">Timer</span>       <span class="o">=</span> <span class="n">Timer</span><span class="p">()</span>
    
    <span class="n">main</span><span class="p">(</span><span class="n">num_items</span><span class="p">,</span> <span class="n">num_threads</span><span class="p">)</span>
</code></pre></div></div> <h3 id="c-example-1"> <a href="#c-example-1" class="anchor-heading" aria-labelledby="c-example-1"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> C++ Example </h3> <div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">#include</span> <span class="cpf">&lt;chrono&gt;</span><span class="cp">
#include</span> <span class="cpf">&lt;iostream&gt;</span><span class="cp">
#include</span> <span class="cpf">&lt;mutex&gt;</span><span class="cp">
#include</span> <span class="cpf">&lt;thread&gt;</span><span class="cp">
#include</span> <span class="cpf">&lt;string&gt;</span><span class="cp">
#include</span> <span class="cpf">&lt;queue&gt;</span><span class="cp">
#include</span> <span class="cpf">&lt;deque&gt;</span><span class="cp">
#include</span> <span class="cpf">&lt;array&gt;</span><span class="cp">
#include</span> <span class="cpf">&lt;sstream&gt;</span><span class="cp">
#include</span> <span class="cpf">&lt;atomic&gt;</span><span class="cp">
</span>
<span class="cp">#include</span> <span class="cpf">"Timer.h"</span><span class="cp">
</span>
<span class="k">struct</span> <span class="nc">QueueThreadSafe</span>
<span class="p">{</span>
    <span class="n">QueueThreadSafe</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="n">id</span><span class="p">)</span>
    <span class="o">:</span> <span class="n">m_ID</span><span class="p">(</span><span class="n">id</span><span class="p">),</span> <span class="n">m_Done</span><span class="p">(</span><span class="nb">false</span><span class="p">)</span> <span class="p">{}</span>

    <span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="n">m_ID</span><span class="p">;</span>
    <span class="n">std</span><span class="o">::</span><span class="n">deque</span><span class="o">&lt;</span><span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="o">&gt;</span> <span class="n">m_Data</span><span class="p">;</span>
    <span class="n">std</span><span class="o">::</span><span class="n">mutex</span> <span class="n">m_Mutex</span><span class="p">;</span>
    <span class="n">std</span><span class="o">::</span><span class="n">condition_variable</span> <span class="n">m_CV</span><span class="p">;</span>
    <span class="n">std</span><span class="o">::</span><span class="n">atomic</span><span class="o">&lt;</span><span class="kt">bool</span><span class="o">&gt;</span> <span class="n">m_Done</span><span class="p">;</span>
<span class="p">};</span>

<span class="kt">void</span> <span class="n">ConsumeTime</span><span class="p">(</span><span class="n">QueueThreadSafe</span><span class="o">&amp;</span> <span class="n">queue</span><span class="p">)</span>
<span class="p">{</span>
    <span class="k">using</span> <span class="k">namespace</span> <span class="n">std</span><span class="o">::</span><span class="n">chrono_literals</span><span class="p">;</span>
    <span class="n">std</span><span class="o">::</span><span class="n">this_thread</span><span class="o">::</span><span class="n">sleep_for</span><span class="p">(</span><span class="mx">1s</span><span class="p">);</span>
    <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"Thread ["</span><span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">this_thread</span><span class="o">::</span><span class="n">get_id</span><span class="p">()</span> <span class="o">&lt;&lt;</span> <span class="s">"] finalizes the job. (spends some time) </span><span class="se">\n</span><span class="s">"</span><span class="p">;</span> 
<span class="p">}</span>

<span class="kt">void</span> <span class="n">SwapQueue</span><span class="p">(</span><span class="n">QueueThreadSafe</span><span class="o">&amp;</span> <span class="n">srcQueue</span><span class="p">,</span> <span class="n">QueueThreadSafe</span><span class="o">&amp;</span> <span class="n">destQueue</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// Timer timer;</span>
    <span class="n">std</span><span class="o">::</span><span class="kr">thread</span><span class="o">::</span><span class="n">id</span> <span class="n">threadID</span> <span class="o">=</span> <span class="n">std</span><span class="o">::</span><span class="n">this_thread</span><span class="o">::</span><span class="n">get_id</span><span class="p">();</span>
    
    <span class="k">while</span> <span class="p">(</span><span class="nb">true</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="n">data</span><span class="p">;</span>
        <span class="p">{</span>
            <span class="n">std</span><span class="o">::</span><span class="n">unique_lock</span><span class="o">&lt;</span><span class="n">std</span><span class="o">::</span><span class="n">mutex</span><span class="o">&gt;</span> <span class="n">src_lk</span><span class="p">(</span><span class="n">srcQueue</span><span class="p">.</span><span class="n">m_Mutex</span><span class="p">);</span>
            <span class="n">srcQueue</span><span class="p">.</span><span class="n">m_CV</span><span class="p">.</span><span class="n">wait</span><span class="p">(</span>
                <span class="n">src_lk</span><span class="p">,</span> <span class="p">[</span><span class="o">&amp;</span><span class="n">srcQueue</span><span class="p">]</span> <span class="p">{</span> <span class="k">return</span> <span class="o">!</span><span class="n">srcQueue</span><span class="p">.</span><span class="n">m_Data</span><span class="p">.</span><span class="n">empty</span><span class="p">()</span> <span class="o">||</span> <span class="n">srcQueue</span><span class="p">.</span><span class="n">m_Done</span><span class="p">;</span> <span class="p">}</span>
            <span class="p">);</span>

            <span class="k">if</span> <span class="p">(</span><span class="n">srcQueue</span><span class="p">.</span><span class="n">m_Data</span><span class="p">.</span><span class="n">empty</span><span class="p">()</span> <span class="o">&amp;&amp;</span> <span class="n">srcQueue</span><span class="p">.</span><span class="n">m_Done</span><span class="p">)</span> <span class="p">{</span>
                <span class="k">break</span><span class="p">;</span>
            <span class="p">}</span>

            <span class="n">data</span> <span class="o">=</span> <span class="n">srcQueue</span><span class="p">.</span><span class="n">m_Data</span><span class="p">.</span><span class="n">front</span><span class="p">();</span>
            <span class="n">srcQueue</span><span class="p">.</span><span class="n">m_Data</span><span class="p">.</span><span class="n">pop_front</span><span class="p">();</span>
        <span class="p">}</span>

        <span class="n">std</span><span class="o">::</span><span class="n">stringstream</span> <span class="n">tempStr</span><span class="p">;</span>
        <span class="n">tempStr</span> <span class="o">&lt;&lt;</span> <span class="s">"["</span> <span class="o">&lt;&lt;</span> <span class="n">threadID</span> <span class="o">&lt;&lt;</span> <span class="s">"] :"</span> <span class="o">&lt;&lt;</span> <span class="n">data</span><span class="p">;</span>
        <span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="n">processedData</span> <span class="o">=</span> <span class="n">tempStr</span><span class="p">.</span><span class="n">str</span><span class="p">();</span>

        <span class="p">{</span>
            <span class="n">std</span><span class="o">::</span><span class="n">lock_guard</span><span class="o">&lt;</span><span class="n">std</span><span class="o">::</span><span class="n">mutex</span><span class="o">&gt;</span> <span class="n">dest_lk</span><span class="p">(</span><span class="n">destQueue</span><span class="p">.</span><span class="n">m_Mutex</span><span class="p">);</span>
            <span class="n">destQueue</span><span class="p">.</span><span class="n">m_Data</span><span class="p">.</span><span class="n">push_back</span><span class="p">(</span><span class="n">processedData</span><span class="p">);</span>
        <span class="p">}</span>
        <span class="n">destQueue</span><span class="p">.</span><span class="n">m_CV</span><span class="p">.</span><span class="n">notify_one</span><span class="p">();</span>
    <span class="p">}</span>
    <span class="n">ConsumeTime</span><span class="p">(</span><span class="n">destQueue</span><span class="p">);</span>
<span class="p">}</span>

<span class="kt">int</span> <span class="n">main</span><span class="p">()</span>
<span class="p">{</span>
    <span class="n">Timer</span> <span class="n">timer</span><span class="p">;</span>
    <span class="k">const</span> <span class="kt">int</span> <span class="n">numThreads</span> <span class="o">=</span> <span class="mi">2</span><span class="p">;</span>
    <span class="k">const</span> <span class="kt">int</span> <span class="n">numDummyStrings</span> <span class="o">=</span> <span class="mi">100</span><span class="p">;</span>

    <span class="n">QueueThreadSafe</span> <span class="n">srcQueue</span><span class="p">(</span><span class="s">"srcQueue"</span><span class="p">);</span>
    <span class="n">QueueThreadSafe</span> <span class="n">destQueue</span><span class="p">(</span><span class="s">"destQueue"</span><span class="p">);</span>

    <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">idx</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">idx</span> <span class="o">&lt;</span> <span class="n">numDummyStrings</span><span class="p">;</span> <span class="n">idx</span><span class="o">++</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="n">std</span><span class="o">::</span><span class="n">stringstream</span> <span class="n">tempStr</span><span class="p">;</span>
        <span class="n">tempStr</span> <span class="o">&lt;&lt;</span> <span class="s">"Data - "</span> <span class="o">&lt;&lt;</span> <span class="n">idx</span><span class="p">;</span>
        <span class="n">srcQueue</span><span class="p">.</span><span class="n">m_Data</span><span class="p">.</span><span class="n">push_back</span><span class="p">(</span><span class="n">tempStr</span><span class="p">.</span><span class="n">str</span><span class="p">());</span>
    <span class="p">}</span>

    <span class="n">std</span><span class="o">::</span><span class="n">array</span><span class="o">&lt;</span><span class="n">std</span><span class="o">::</span><span class="kr">thread</span><span class="p">,</span> <span class="n">numThreads</span><span class="o">&gt;</span> <span class="n">threads</span><span class="p">;</span>

    <span class="c1">// Start worker threads</span>
    <span class="k">for</span> <span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="kr">thread</span><span class="o">&amp;</span> <span class="kr">thread</span> <span class="o">:</span> <span class="n">threads</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="kr">thread</span> <span class="o">=</span> <span class="n">std</span><span class="o">::</span><span class="kr">thread</span><span class="p">(</span><span class="n">SwapQueue</span><span class="p">,</span> <span class="n">std</span><span class="o">::</span><span class="n">ref</span><span class="p">(</span><span class="n">srcQueue</span><span class="p">),</span> <span class="n">std</span><span class="o">::</span><span class="n">ref</span><span class="p">(</span><span class="n">destQueue</span><span class="p">));</span>
    <span class="p">}</span>

    <span class="p">{</span>
        <span class="n">std</span><span class="o">::</span><span class="n">lock_guard</span><span class="o">&lt;</span><span class="n">std</span><span class="o">::</span><span class="n">mutex</span><span class="o">&gt;</span> <span class="n">lock</span><span class="p">(</span><span class="n">srcQueue</span><span class="p">.</span><span class="n">m_Mutex</span><span class="p">);</span>
        <span class="n">srcQueue</span><span class="p">.</span><span class="n">m_Done</span> <span class="o">=</span> <span class="nb">true</span><span class="p">;</span> <span class="c1">// Mark queue as done</span>
    <span class="p">}</span>
    <span class="n">srcQueue</span><span class="p">.</span><span class="n">m_CV</span><span class="p">.</span><span class="n">notify_all</span><span class="p">();</span> <span class="c1">// Wake up all threads</span>

    <span class="c1">// Wait for all threads to finish</span>
    <span class="k">for</span> <span class="p">(</span><span class="k">auto</span><span class="o">&amp;</span> <span class="kr">thread</span> <span class="o">:</span> <span class="n">threads</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="kr">thread</span><span class="p">.</span><span class="n">join</span><span class="p">();</span>
    <span class="p">}</span>

    <span class="c1">// Print results</span>
    <span class="k">for</span> <span class="p">(</span><span class="k">auto</span><span class="o">&amp;</span> <span class="n">datum</span> <span class="o">:</span> <span class="n">destQueue</span><span class="p">.</span><span class="n">m_Data</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="n">datum</span> <span class="o">&lt;&lt;</span> <span class="s">"</span><span class="se">\n</span><span class="s">"</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div></div> <p>The expected output would be as follows:</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Thread <span class="o">[</span>0x16b81f000] finalizes the job. <span class="o">(</span>spends some <span class="nb">time</span><span class="o">)</span> 
Thread <span class="o">[</span>0x16b793000] finalizes the job. <span class="o">(</span>spends some <span class="nb">time</span><span class="o">)</span> 
<span class="o">[</span>0x16b793000] :Data - 0
<span class="o">[</span>0x16b81f000] :Data - 1
<span class="o">[</span>0x16b793000] :Data - 2
<span class="o">[</span>0x16b793000] :Data - 4
<span class="o">[</span>0x16b81f000] :Data - 3
<span class="o">[</span>0x16b793000] :Data - 5
...
<span class="o">[</span>0x16b793000] :Data - 99
Process Ended <span class="k">in </span>1.00558 <span class="o">[</span>s].
</code></pre></div></div> <h2 id="socket"> <a href="#socket" class="anchor-heading" aria-labelledby="socket"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Socket </h2> <p>Sockets provide communication between processes over a network or within the same machine. They support both connection-oriented (TCP) and connectionless (UDP) communication models, making them suitable for distributed systems. In this case, we use local socket by using <code class="language-plaintext highlighter-rouge">AF_UNIX</code> to communicate between threads.</p><pre><code class="language-mermaid"> 
sequenceDiagram
    participant Process A
    participant Socket
    participant Process B

    Process A-&gt;&gt;Socket: Connect to Process B
    Process B--&gt;&gt;Socket: Accept Connection

    Process A-&gt;&gt;Socket: Send Data (Message 1)
    Socket--&gt;&gt;Process B: Receive Data (Message 1)
    
    Process B-&gt;&gt;Socket: Send Response (Message 2)
    Socket--&gt;&gt;Process A: Receive Response (Message 2)

</code></pre><p>Using multiple sockets, we can provide typical web server architecture, which will be discussed in the future.</p> <h3 id="python-example-2"> <a href="#python-example-2" class="anchor-heading" aria-labelledby="python-example-2"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Python Example </h3> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="nn">os</span>
<span class="kn">import</span> <span class="nn">socket</span>
<span class="kn">from</span> <span class="nn">threading</span> <span class="kn">import</span> <span class="n">Thread</span>
<span class="kn">import</span> <span class="nn">time</span>

<span class="n">SOCKET_FILE</span> <span class="o">=</span> <span class="s">"./mailBox"</span>

<span class="k">class</span> <span class="nc">Sender</span><span class="p">(</span><span class="n">Thread</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">().</span><span class="n">__init__</span><span class="p">()</span>
        <span class="bp">self</span><span class="p">.</span><span class="n">client</span> <span class="o">=</span> <span class="n">socket</span><span class="p">.</span><span class="n">socket</span><span class="p">(</span><span class="n">socket</span><span class="p">.</span><span class="n">AF_UNIX</span><span class="p">,</span> <span class="n">socket</span><span class="p">.</span><span class="n">SOCK_STREAM</span><span class="p">)</span>
    
    <span class="k">def</span> <span class="nf">run</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="p">.</span><span class="n">client</span><span class="p">.</span><span class="n">connect</span><span class="p">(</span><span class="n">SOCKET_FILE</span><span class="p">)</span>
        <span class="n">messages</span> <span class="o">=</span> <span class="p">[</span><span class="s">"Hello World!"</span><span class="p">,</span> <span class="s">" "</span><span class="p">,</span> <span class="s">"Why so serious?"</span><span class="p">]</span>
        <span class="k">with</span> <span class="bp">self</span><span class="p">.</span><span class="n">client</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">message</span> <span class="ow">in</span> <span class="n">messages</span><span class="p">:</span>
                <span class="bp">self</span><span class="p">.</span><span class="n">client</span><span class="p">.</span><span class="n">sendall</span><span class="p">(</span><span class="n">message</span><span class="p">.</span><span class="n">encode</span><span class="p">())</span>

<span class="k">class</span> <span class="nc">Receiver</span><span class="p">(</span><span class="n">Thread</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">().</span><span class="n">__init__</span><span class="p">()</span>
        <span class="bp">self</span><span class="p">.</span><span class="n">server</span> <span class="o">=</span> <span class="n">socket</span><span class="p">.</span><span class="n">socket</span><span class="p">(</span><span class="n">socket</span><span class="p">.</span><span class="n">AF_UNIX</span><span class="p">,</span> <span class="n">socket</span><span class="p">.</span><span class="n">SOCK_STREAM</span><span class="p">)</span>
    
    <span class="k">def</span> <span class="nf">run</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="p">.</span><span class="n">server</span><span class="p">.</span><span class="n">bind</span><span class="p">(</span><span class="n">SOCKET_FILE</span><span class="p">)</span>
        <span class="bp">self</span><span class="p">.</span><span class="n">server</span><span class="p">.</span><span class="n">listen</span><span class="p">()</span>
        <span class="n">conn</span><span class="p">,</span> <span class="n">addr</span> <span class="o">=</span> <span class="bp">self</span><span class="p">.</span><span class="n">server</span><span class="p">.</span><span class="n">accept</span><span class="p">()</span>

        <span class="k">while</span> <span class="bp">True</span><span class="p">:</span>
            <span class="n">data</span> <span class="o">=</span> <span class="n">conn</span><span class="p">.</span><span class="n">recv</span><span class="p">(</span><span class="mi">1024</span><span class="p">)</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">data</span><span class="p">:</span>
                <span class="k">break</span>
            <span class="n">message</span> <span class="o">=</span> <span class="n">data</span><span class="p">.</span><span class="n">decode</span><span class="p">()</span>
            <span class="k">print</span><span class="p">(</span><span class="n">message</span><span class="p">)</span>
        
        <span class="bp">self</span><span class="p">.</span><span class="n">server</span><span class="p">.</span><span class="n">close</span><span class="p">()</span>

<span class="k">def</span> <span class="nf">remove_socket</span><span class="p">():</span>
    <span class="k">if</span> <span class="n">os</span><span class="p">.</span><span class="n">path</span><span class="p">.</span><span class="n">exists</span><span class="p">(</span><span class="n">SOCKET_FILE</span><span class="p">):</span>
        <span class="n">os</span><span class="p">.</span><span class="n">remove</span><span class="p">(</span><span class="n">SOCKET_FILE</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">main</span><span class="p">():</span>
    <span class="n">remove_socket</span><span class="p">()</span>
    
    <span class="n">receiver</span> <span class="p">:</span> <span class="n">Thread</span> <span class="o">=</span> <span class="n">Receiver</span><span class="p">()</span>
    <span class="n">sender</span>   <span class="p">:</span> <span class="n">Thread</span> <span class="o">=</span> <span class="n">Sender</span><span class="p">()</span>

    <span class="n">receiver</span><span class="p">.</span><span class="n">start</span><span class="p">()</span>
    <span class="n">time</span><span class="p">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
    <span class="n">sender</span><span class="p">.</span><span class="n">start</span><span class="p">()</span>

    <span class="n">receiver</span><span class="p">.</span><span class="n">join</span><span class="p">()</span>
    <span class="n">sender</span><span class="p">.</span><span class="n">join</span><span class="p">()</span>

    <span class="n">remove_socket</span><span class="p">()</span>

<span class="k">if</span> <span class="s">"__main__"</span> <span class="o">==</span> <span class="n">__name__</span><span class="p">:</span>
    <span class="n">main</span><span class="p">()</span>
</code></pre></div></div> <h3 id="c-example-2"> <a href="#c-example-2" class="anchor-heading" aria-labelledby="c-example-2"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> C++ Example </h3> <div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">#include</span> <span class="cpf">&lt;iostream&gt;</span><span class="cp">
#include</span> <span class="cpf">&lt;cstring&gt;</span><span class="c1">  // For memset()</span><span class="cp">
#include</span> <span class="cpf">&lt;sys/socket.h&gt;</span><span class="cp">
#include</span> <span class="cpf">&lt;sys/un.h&gt;</span><span class="c1"> // For local file sockets</span><span class="cp">
#include</span> <span class="cpf">&lt;unistd.h&gt;</span><span class="c1"> // For close(), unlink()</span><span class="cp">
#include</span> <span class="cpf">&lt;thread&gt;</span><span class="cp">
#include</span> <span class="cpf">&lt;chrono&gt;</span><span class="cp">
</span>
<span class="k">const</span> <span class="kt">char</span><span class="o">*</span> <span class="n">SOCKET_FILE_PATH</span> <span class="o">=</span> <span class="s">"./mailBox"</span><span class="p">;</span>

<span class="k">class</span> <span class="nc">Client</span>
<span class="p">{</span>
<span class="nl">public:</span>
    <span class="n">Client</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="n">m_Socket</span> <span class="o">=</span> <span class="n">socket</span><span class="p">(</span><span class="n">AF_UNIX</span><span class="p">,</span> <span class="n">SOCK_STREAM</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">m_Socket</span> <span class="o">==</span> <span class="o">-</span><span class="mi">1</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="n">perror</span><span class="p">(</span><span class="s">"Client: Socket creation failed"</span><span class="p">);</span>
            <span class="n">exit</span><span class="p">(</span><span class="n">EXIT_FAILURE</span><span class="p">);</span>
        <span class="p">}</span>

        <span class="n">memset</span><span class="p">(</span><span class="o">&amp;</span><span class="n">m_Client</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="k">sizeof</span><span class="p">(</span><span class="n">m_Client</span><span class="p">));</span>
        <span class="n">m_Client</span><span class="p">.</span><span class="n">sun_family</span> <span class="o">=</span> <span class="n">AF_UNIX</span><span class="p">;</span>
        <span class="n">strncpy</span><span class="p">(</span><span class="n">m_Client</span><span class="p">.</span><span class="n">sun_path</span><span class="p">,</span> <span class="n">SOCKET_FILE_PATH</span><span class="p">,</span> <span class="k">sizeof</span><span class="p">(</span><span class="n">m_Client</span><span class="p">.</span><span class="n">sun_path</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="kt">void</span> <span class="n">SendMessageLoop</span><span class="p">(</span><span class="kt">int</span> <span class="n">numMessages</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="kt">int</span> <span class="n">messageCount</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
        <span class="k">while</span> <span class="p">(</span><span class="n">messageCount</span> <span class="o">&lt;</span> <span class="n">numMessages</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="kt">int</span> <span class="n">sock</span> <span class="o">=</span> <span class="n">socket</span><span class="p">(</span><span class="n">AF_UNIX</span><span class="p">,</span> <span class="n">SOCK_STREAM</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
            <span class="k">if</span> <span class="p">(</span><span class="n">connect</span><span class="p">(</span><span class="n">sock</span><span class="p">,</span> <span class="p">(</span><span class="k">struct</span> <span class="nc">sockaddr</span><span class="o">*</span><span class="p">)</span><span class="o">&amp;</span><span class="n">m_Client</span><span class="p">,</span> <span class="k">sizeof</span><span class="p">(</span><span class="n">m_Client</span><span class="p">))</span> <span class="o">==</span> <span class="o">-</span><span class="mi">1</span><span class="p">)</span>
            <span class="p">{</span>
                <span class="n">perror</span><span class="p">(</span><span class="s">"Client: Connection failed"</span><span class="p">);</span>
                <span class="n">close</span><span class="p">(</span><span class="n">sock</span><span class="p">);</span>
                <span class="k">return</span><span class="p">;</span>
            <span class="p">}</span>

            <span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="n">message</span> <span class="o">=</span> <span class="s">"Message "</span> <span class="o">+</span> <span class="n">std</span><span class="o">::</span><span class="n">to_string</span><span class="p">(</span><span class="n">messageCount</span><span class="o">++</span><span class="p">);</span>
            <span class="n">send</span><span class="p">(</span><span class="n">sock</span><span class="p">,</span> <span class="n">message</span><span class="p">.</span><span class="n">c_str</span><span class="p">(),</span> <span class="n">message</span><span class="p">.</span><span class="n">size</span><span class="p">(),</span> <span class="mi">0</span><span class="p">);</span>
            <span class="n">close</span><span class="p">(</span><span class="n">sock</span><span class="p">);</span>

            <span class="n">std</span><span class="o">::</span><span class="n">this_thread</span><span class="o">::</span><span class="n">sleep_for</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">chrono</span><span class="o">::</span><span class="n">milliseconds</span><span class="p">(</span><span class="mi">60</span><span class="p">));</span>
        <span class="p">}</span>
        <span class="o">++</span><span class="n">messageCount</span><span class="p">;</span>
    <span class="p">}</span>

<span class="nl">private:</span>
    <span class="kt">int</span> <span class="n">m_Socket</span><span class="p">;</span>
    <span class="k">struct</span> <span class="nc">sockaddr_un</span> <span class="n">m_Client</span><span class="p">;</span>
<span class="p">};</span>

<span class="k">class</span> <span class="nc">Server</span>
<span class="p">{</span>
<span class="nl">public:</span>
    <span class="n">Server</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="n">m_Socket</span> <span class="o">=</span> <span class="n">socket</span><span class="p">(</span><span class="n">AF_UNIX</span><span class="p">,</span> <span class="n">SOCK_STREAM</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">m_Socket</span> <span class="o">==</span> <span class="o">-</span><span class="mi">1</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="n">perror</span><span class="p">(</span><span class="s">"Server: Socket creation failed"</span><span class="p">);</span>
            <span class="n">exit</span><span class="p">(</span><span class="n">EXIT_FAILURE</span><span class="p">);</span>
        <span class="p">}</span>

        <span class="n">memset</span><span class="p">(</span><span class="o">&amp;</span><span class="n">m_Server</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="k">sizeof</span><span class="p">(</span><span class="n">m_Server</span><span class="p">));</span>
        <span class="n">m_Server</span><span class="p">.</span><span class="n">sun_family</span> <span class="o">=</span> <span class="n">AF_UNIX</span><span class="p">;</span>
        <span class="n">strncpy</span><span class="p">(</span><span class="n">m_Server</span><span class="p">.</span><span class="n">sun_path</span><span class="p">,</span> <span class="n">SOCKET_FILE_PATH</span><span class="p">,</span> <span class="k">sizeof</span><span class="p">(</span><span class="n">m_Server</span><span class="p">.</span><span class="n">sun_path</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span><span class="p">);</span>

        <span class="n">unlink</span><span class="p">(</span><span class="n">SOCKET_FILE_PATH</span><span class="p">);</span>

        <span class="k">if</span> <span class="p">(</span><span class="n">bind</span><span class="p">(</span><span class="n">m_Socket</span><span class="p">,</span> <span class="p">(</span><span class="k">struct</span> <span class="nc">sockaddr</span><span class="o">*</span><span class="p">)</span><span class="o">&amp;</span><span class="n">m_Server</span><span class="p">,</span> <span class="k">sizeof</span><span class="p">(</span><span class="n">m_Server</span><span class="p">))</span> <span class="o">==</span> <span class="o">-</span><span class="mi">1</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="n">perror</span><span class="p">(</span><span class="s">"Server: Bind failed"</span><span class="p">);</span>
            <span class="n">close</span><span class="p">(</span><span class="n">m_Socket</span><span class="p">);</span>
            <span class="n">exit</span><span class="p">(</span><span class="n">EXIT_FAILURE</span><span class="p">);</span>
        <span class="p">}</span>

        <span class="k">if</span> <span class="p">(</span><span class="n">listen</span><span class="p">(</span><span class="n">m_Socket</span><span class="p">,</span> <span class="mi">5</span><span class="p">)</span> <span class="o">==</span> <span class="o">-</span><span class="mi">1</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="n">perror</span><span class="p">(</span><span class="s">"Server: Listen failed"</span><span class="p">);</span>
            <span class="n">close</span><span class="p">(</span><span class="n">m_Socket</span><span class="p">);</span>
            <span class="n">exit</span><span class="p">(</span><span class="n">EXIT_FAILURE</span><span class="p">);</span>
        <span class="p">}</span>
    <span class="p">}</span>

    <span class="o">~</span><span class="n">Server</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="n">close</span><span class="p">(</span><span class="n">m_Socket</span><span class="p">);</span>
        <span class="n">unlink</span><span class="p">(</span><span class="n">SOCKET_FILE_PATH</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="kt">void</span> <span class="n">ReceiveMessage</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="k">while</span> <span class="p">(</span><span class="nb">true</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"Server: Waiting for a client...</span><span class="se">\n</span><span class="s">"</span><span class="p">;</span>

            <span class="kt">int</span> <span class="n">clientSocket</span> <span class="o">=</span> <span class="n">accept</span><span class="p">(</span><span class="n">m_Socket</span><span class="p">,</span> <span class="nb">nullptr</span><span class="p">,</span> <span class="nb">nullptr</span><span class="p">);</span>
            <span class="k">if</span> <span class="p">(</span><span class="n">clientSocket</span> <span class="o">==</span> <span class="o">-</span><span class="mi">1</span><span class="p">)</span>
            <span class="p">{</span>
                <span class="n">perror</span><span class="p">(</span><span class="s">"Server: Accept failed"</span><span class="p">);</span>
                <span class="k">continue</span><span class="p">;</span>
            <span class="p">}</span>

            <span class="kt">char</span> <span class="n">messageBuffer</span><span class="p">[</span><span class="mi">1024</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span><span class="mi">0</span><span class="p">};</span>
            <span class="n">recv</span><span class="p">(</span><span class="n">clientSocket</span><span class="p">,</span> <span class="n">messageBuffer</span><span class="p">,</span> <span class="k">sizeof</span><span class="p">(</span><span class="n">messageBuffer</span><span class="p">),</span> <span class="mi">0</span><span class="p">);</span>
            <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"Server received: "</span> <span class="o">&lt;&lt;</span> <span class="n">messageBuffer</span> <span class="o">&lt;&lt;</span> <span class="s">"</span><span class="se">\n</span><span class="s">"</span><span class="p">;</span>

            <span class="n">close</span><span class="p">(</span><span class="n">clientSocket</span><span class="p">);</span>
        <span class="p">}</span>
    <span class="p">}</span>

<span class="nl">private:</span>
    <span class="kt">int</span> <span class="n">m_Socket</span><span class="p">;</span>
    <span class="k">struct</span> <span class="nc">sockaddr_un</span> <span class="n">m_Server</span><span class="p">;</span>
<span class="p">};</span>

<span class="kt">int</span> <span class="n">main</span><span class="p">()</span>
<span class="p">{</span>
    <span class="n">Server</span> <span class="n">server</span><span class="p">;</span>
    <span class="n">std</span><span class="o">::</span><span class="kr">thread</span> <span class="n">serverThread</span><span class="p">(</span><span class="o">&amp;</span><span class="n">Server</span><span class="o">::</span><span class="n">ReceiveMessage</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">server</span><span class="p">);</span> <span class="c1">// not server.ReceiveMessage (binded funciton only can be used as function call)</span>

    <span class="n">sleep</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span> <span class="c1">// system sleep</span>

    <span class="n">Client</span> <span class="n">client</span><span class="p">;</span>
    <span class="n">std</span><span class="o">::</span><span class="kr">thread</span> <span class="n">clientThread</span><span class="p">(</span><span class="o">&amp;</span><span class="n">Client</span><span class="o">::</span><span class="n">SendMessageLoop</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">client</span><span class="p">,</span> <span class="mi">10</span><span class="p">);</span>

    <span class="n">serverThread</span><span class="p">.</span><span class="n">join</span><span class="p">();</span>
    <span class="n">clientThread</span><span class="p">.</span><span class="n">join</span><span class="p">();</span>

<span class="p">}</span>
</code></pre></div></div> <p>The expected output would be as follows:</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Server: Waiting <span class="k">for </span>a client...
Server received: Message 1
Server: Waiting <span class="k">for </span>a client...
Server received: Message 2
Server: Waiting <span class="k">for </span>a client...
Server received: Message 3
Server: Waiting <span class="k">for </span>a client...
Server received: Message 4
Server: Waiting <span class="k">for </span>a client...
Server received: Message 5
Server: Waiting <span class="k">for </span>a client...
Server received: Message 6
Server: Waiting <span class="k">for </span>a client...
Server received: Message 7
Server: Waiting <span class="k">for </span>a client...
Server received: Message 8
Server: Waiting <span class="k">for </span>a client...
Server received: Message 9
Server: Waiting <span class="k">for </span>a client...
</code></pre></div></div> <h2 id="conclusion"> <a href="#conclusion" class="anchor-heading" aria-labelledby="conclusion"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Conclusion </h2> <p>Inter-Process Communication (IPC) is fundamental to concurrent programming, allowing processes and threads to coordinate efficiently. Message-passing IPC techniques provide better isolation and modularity at the cost of high-performance compared to shared-memory IPC.</p> </main> <hr> <footer> <p><a href="#top" id="back-to-top">Back to top</a></p> <div class="d-flex mt-2"> </div> </footer> </div> </div> <div class="search-overlay"></div> </div> <script src="https://cdn.jsdelivr.net/npm/mermaid@9.1.6/dist/mermaid.min.js"></script> <script> var config = {} ; mermaid.initialize(config); window.mermaid.init(undefined, document.querySelectorAll('.language-mermaid')); </script> </body> </html>
